(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-337d89ca"],{"21dc":function(e,t,r){"use strict";var a=r("568d"),s=r.n(a);s.a},"2f11":function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return d})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return p})),r.d(t,"c",(function(){return m})),r.d(t,"k",(function(){return h})),r.d(t,"e",(function(){return f})),r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return g})),r.d(t,"h",(function(){return b})),r.d(t,"d",(function(){return v}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b");var a=r("2fa7"),s=(r("96cf"),r("be3b")),n=r("4328"),o=r.n(n);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(){var e,t=arguments;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/email_mark",method:"post",data:o.a.stringify(e)}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))}function d(){var e,t=arguments;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/setAutograph",method:"post",data:o.a.stringify(e)}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))}function u(){var e,t=arguments;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/getAutograph",method:"post",data:o.a.stringify(e)}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))}function p(e){var t,r,a,n,i,l,c,d;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:return t=e.is_read,r=void 0===t?"":t,a=e.keywords,n=void 0===a?"":a,i=e.send,l=void 0===i?"0":i,c=e.page,d=e.page_size,u.next=3,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/email_list",method:"post",data:o.a.stringify({is_read:r,keywords:n,send:l,page:c,page_size:d})}));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}}))}function m(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/delete",method:"post",data:e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function h(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/get_email",method:"post"}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}function f(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/email",method:"get",params:l({},e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function y(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/add_email",method:"post",data:l({},e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function g(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/del_email",method:"post",data:l({},e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function b(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/send_email",method:"post",data:o.a.stringify(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function v(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(s["a"])({url:"/api/a_e/emailClear",method:"post",data:o.a.stringify(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}},"3ca3":function(e,t,r){"use strict";var a=r("6547").charAt,s=r("69f3"),n=r("7dd0"),o="String Iterator",i=s.set,l=s.getterFor(o);n(String,"String",(function(e){i(this,{type:o,string:String(e),index:0})}),(function(){var e,t=l(this),r=t.string,s=t.index;return s>=r.length?{value:void 0,done:!0}:(e=a(r,s),t.index+=e.length,{value:e,done:!1})}))},"466d":function(e,t,r){"use strict";var a=r("d784"),s=r("825a"),n=r("50c4"),o=r("1d80"),i=r("8aa5"),l=r("14c3");a("match",1,(function(e,t,r){return[function(t){var r=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var o=s(e),c=String(this);if(!o.global)return l(o,c);var d=o.unicode;o.lastIndex=0;var u,p=[],m=0;while(null!==(u=l(o,c))){var h=String(u[0]);p[m]=h,""===h&&(o.lastIndex=i(c,n(o.lastIndex),d)),m++}return 0===m?null:p}]}))},"568d":function(e,t,r){},6062:function(e,t,r){"use strict";var a=r("6d61"),s=r("6566");e.exports=a("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(e,t,r){"use strict";var a=r("9bf2").f,s=r("7c73"),n=r("e2cc"),o=r("f8c2"),i=r("19aa"),l=r("2266"),c=r("7dd0"),d=r("2626"),u=r("83ab"),p=r("f183").fastKey,m=r("69f3"),h=m.set,f=m.getterFor;e.exports={getConstructor:function(e,t,r,c){var d=e((function(e,a){i(e,d,t),h(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),u||(e.size=0),void 0!=a&&l(a,e[c],e,r)})),m=f(t),y=function(e,t,r){var a,s,n=m(e),o=g(e,t);return o?o.value=r:(n.last=o={index:s=p(t,!0),key:t,value:r,previous:a=n.last,next:void 0,removed:!1},n.first||(n.first=o),a&&(a.next=o),u?n.size++:e.size++,"F"!==s&&(n.index[s]=o)),e},g=function(e,t){var r,a=m(e),s=p(t);if("F"!==s)return a.index[s];for(r=a.first;r;r=r.next)if(r.key==t)return r};return n(d.prototype,{clear:function(){var e=this,t=m(e),r=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete r[a.index],a=a.next;t.first=t.last=void 0,u?t.size=0:e.size=0},delete:function(e){var t=this,r=m(t),a=g(t,e);if(a){var s=a.next,n=a.previous;delete r.index[a.index],a.removed=!0,n&&(n.next=s),s&&(s.previous=n),r.first==a&&(r.first=s),r.last==a&&(r.last=n),u?r.size--:t.size--}return!!a},forEach:function(e){var t,r=m(this),a=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),n(d.prototype,r?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),u&&a(d.prototype,"size",{get:function(){return m(this).size}}),d},setStrong:function(e,t,r){var a=t+" Iterator",s=f(t),n=f(a);c(e,t,(function(e,t){h(this,{type:a,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=n(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),d(t)}}},"6d61":function(e,t,r){"use strict";var a=r("23e7"),s=r("da84"),n=r("94ca"),o=r("6eeb"),i=r("f183"),l=r("2266"),c=r("19aa"),d=r("861d"),u=r("d039"),p=r("1c7e"),m=r("d44e"),h=r("7156");e.exports=function(e,t,r){var f=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),g=f?"set":"add",b=s[e],v=b&&b.prototype,_=b,F={},x=function(e){var t=v[e];o(v,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(y&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!d(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!d(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(n(e,"function"!=typeof b||!(y||v.forEach&&!u((function(){(new b).entries().next()})))))_=r.getConstructor(t,e,f,g),i.REQUIRED=!0;else if(n(e,!0)){var k=new _,w=k[g](y?{}:-0,1)!=k,I=u((function(){k.has(1)})),S=p((function(e){new b(e)})),A=!y&&u((function(){var e=new b,t=5;while(t--)e[g](t,t);return!e.has(-0)}));S||(_=t((function(t,r){c(t,_,e);var a=h(new b,t,_);return void 0!=r&&l(r,a[g],a,f),a})),_.prototype=v,v.constructor=_),(I||A)&&(x("delete"),x("has"),f&&x("get")),(A||w)&&x(g),y&&v.clear&&delete v.clear}return F[e]=_,a({global:!0,forced:_!=b},F),m(_,e),y||r.setStrong(_,e,f),_}},bb2f:function(e,t,r){var a=r("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},ddb0:function(e,t,r){var a=r("da84"),s=r("fdbc"),n=r("e260"),o=r("9112"),i=r("b622"),l=i("iterator"),c=i("toStringTag"),d=n.values;for(var u in s){var p=a[u],m=p&&p.prototype;if(m){if(m[l]!==d)try{o(m,l,d)}catch(f){m[l]=d}if(m[c]||o(m,c,u),s[u])for(var h in n)if(m[h]!==n[h])try{o(m,h,n[h])}catch(f){m[h]=n[h]}}}},e786:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-header",{staticClass:"header clearfixed",staticStyle:{"border-bottom":"1px solid #eee"}},[a("div",{staticClass:"head",staticStyle:{width:"1200px",margin:"0 auto"}},[a("div",{staticClass:"flex a-center",staticStyle:{width:"100%"}},[a("div",{staticClass:"logo m-r-80 pull-left cursor-pointer"},[a("img",{staticClass:"h-60",attrs:{src:r("0c60"),alt:""},on:{click:function(t){return e.$router.push("/index/index")}}})]),a("div",{staticClass:"dashboard fs-14 pull-right",staticStyle:{width:"100%",display:"none"}},[a("ul",{staticClass:"MuneList pull-right"},[e._l(e.menus,(function(t){return[t.hidden?e._e():a("li",{key:t.name,class:{active:t.name===e.currentPathName},staticStyle:{display:"inline-block"},on:{click:function(r){return e.handleClick(t)}}},[e._v(" "+e._s(t.label)+" ")])]}))],2)])])])]),a("div",{staticClass:"m-r-12",staticStyle:{width:"1200px",margin:"0 auto"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,inline:!0,"label-width":"en"===e.znoren?"130px":"110px",rules:e.rulesForm}},[a("div",{staticClass:"b-b outItem",staticStyle:{position:"relative"}},[a("div",[a("el-form-item",{staticClass:"fw-900 m-t-20 addStart",staticStyle:{"font-weight":"500"},attrs:{label:"验货时间",prop:"date","label-width":"en"===e.znoren?"150px":"110px"}},[a("el-date-picker",{attrs:{"value-format":"yyyy/MM/dd",type:"date","picker-options":e.expireTimeOption,placeholder:"选择日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}}),a("span",{staticStyle:{"margin-left":"10px","font-size":"14px",color:"#333"}},[e._v(e._s(e.computedWeek))])],1)],1),a("div",[a("el-form-item",{staticClass:"fw-900 addStart",staticStyle:{"font-weight":"500"},attrs:{label:"验货类型",prop:"type"}},[a("div",{staticClass:"pull-left",staticStyle:{width:"551px"}},[a("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.checkType,(function(t){return a("el-radio",{key:t.id,staticClass:"lh-10",attrs:{label:t.id}},[e._v(e._s(t.value))])})),1)],1)])],1),a("div",{staticStyle:{position:"absolute",top:"23px",right:"85px"}},[a("span",{staticClass:"fs-32",staticStyle:{color:"#6f6f6f","border-bottom":"2px solid #d2d2d2"}},[e._v(" US$ "),a("span",{staticStyle:{color:"#f27c24","font-size":"50px"}},[e._v(e._s(e.YHMoney[e.yhFeeType[e.ruleForm.type-1]]))]),e._v(" /人/天 ")]),a("br"),a("span",{staticClass:"text-grey",staticStyle:{color:"#888",display:"inline-block",width:"100%","text-align":"center"}},[e._v("基准费用")])])]),a("div",{staticClass:"b-b outItem",staticStyle:{"padding-left":"42px","padding-top":"20px","padding-right":"20px"}},[a("div",{staticClass:"fw-900 mtb20"},[e._v(" 工厂信息 "),a("span",{staticStyle:{color:"#a8a6a7","font-size":"14px","font-weight":"500"}},[e._v("(验货地址)")])]),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticStyle:{float:"left"}},[a("el-form-item",{attrs:{label:"工厂名称"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_factory.length||!e.Input_factory[0]}},[a("el-input",{staticClass:"bg-yellow",attrs:{placeholder:"目的地单位"},on:{input:e.adress_other_Change,focus:function(t){return e.F_address(e.ruleForm.factorys.company_name,"company_name")},blur:e.company_name_blur},nativeOn:{dblclick:function(t){return e.factorysDB(e.ruleForm.factorys.company_name,"company_name")}},model:{value:e.ruleForm.factorys.company_name,callback:function(t){e.$set(e.ruleForm.factorys,"company_name",t)},expression:"ruleForm.factorys.company_name"}},[a("el-button",{staticStyle:{width:"140px"},attrs:{slot:"append",icon:"el-icon-date"},on:{click:function(t){t.stopPropagation(),e.addressSelectMask=!0,e.templateRadio="",e.saveAddressSearch=e.addressSearch="",e.factorysAddressIdx=1,e.getFactoryAddressList()}},slot:"append"},[e._v("地址簿")])],1)],1)],1),a("br"),a("el-form-item",{staticClass:"addStart",attrs:{label:"联系人",prop:"factorys.name"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_factory.length||!e.Input_factory[0]}},[a("el-input",{attrs:{placeholder:"姓名"},on:{input:e.adress_other_Change,focus:function(t){return e.F_address(e.ruleForm.factorys.name,"name")},blur:e.name_blur},nativeOn:{dblclick:function(t){return e.factorysDB(e.ruleForm.factorys.name,"name")}},model:{value:e.ruleForm.factorys.name,callback:function(t){e.$set(e.ruleForm.factorys,"name",t)},expression:"ruleForm.factorys.name"}})],1)],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"邮箱",prop:"factorys.email"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_factory.length||!e.Input_factory[0]}},[a("el-input",{attrs:{placeholder:"联系人邮箱地址"},on:{input:e.adress_other_Change,focus:function(t){return e.F_address(e.ruleForm.factorys.email,"email")},blur:e.checkExit},nativeOn:{dblclick:function(t){return e.factorysDB(e.ruleForm.factorys.email,"email")}},model:{value:e.ruleForm.factorys.email,callback:function(t){e.$set(e.ruleForm.factorys,"email","string"===typeof t?t.trim():t)},expression:"ruleForm.factorys.email"}})],1)],1),a("el-form-item",{attrs:{label:"备用电话",prop:"factorys.spare_phone"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_factory.length||!e.Input_factory[0]}},[a("el-input",{attrs:{placeholder:"建议填写，以保持畅通"},on:{input:e.adress_other_Change,focus:function(t){return e.F_address(e.ruleForm.factorys.spare_phone,"spare_phone")}},nativeOn:{dblclick:function(t){return e.factorysDB(e.ruleForm.factorys.spare_phone,"spare_phone")}},model:{value:e.ruleForm.factorys.spare_phone,callback:function(t){e.$set(e.ruleForm.factorys,"spare_phone","string"===typeof t?t.trim():t)},expression:"ruleForm.factorys.spare_phone"}})],1)],1),a("br"),a("el-form-item",{staticClass:"addStart",attrs:{label:"手机号码",prop:"factorys.phone"}},[a("el-input",{attrs:{placeholder:"手机或固定电话"},on:{input:e.adress_other_Change,focus:function(t){return e.F_address(e.ruleForm.factorys.phone,"phone")},blur:e.phone_blur},nativeOn:{dblclick:function(t){return e.factorysDB(e.ruleForm.factorys.phone,"phone")}},model:{value:e.ruleForm.factorys.phone,callback:function(t){e.$set(e.ruleForm.factorys,"phone","string"===typeof t?t.trim():t)},expression:"ruleForm.factorys.phone"}})],1),a("el-form-item",{attrs:{label:"工厂地址",prop:"factorys_country"}},["zh"==e.IsLanguage?a("el-select",{staticStyle:{width:"200px","vertical-align":"middle"},attrs:{filterable:"",placeholder:"请选择国家"},on:{change:function(t){e.provinceAndCity=["",""],e.ruleForm.factorys.province="",e.ruleForm.factorys.city,e.ruleForm.factorys=Object.assign({},e.ruleForm.factorys)}},model:{value:e.ruleForm.factorys.country,callback:function(t){e.$set(e.ruleForm.factorys,"country",t)},expression:"ruleForm.factorys.country"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1):a("el-select",{staticStyle:{width:"200px","vertical-align":"middle"},attrs:{filterable:"",placeholder:"请选择国家"},on:{change:function(t){e.provinceAndCity=["",""],e.ruleForm.factorys.province="",e.ruleForm.factorys.city,e.ruleForm.factorys=Object.assign({},e.ruleForm.factorys)}},model:{value:e.ruleForm.factorys.country,callback:function(t){e.$set(e.ruleForm.factorys,"country",t)},expression:"ruleForm.factorys.country"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name_en,value:e.name_en}})})),1),"中国"==e.ruleForm.factorys.country?a("el-cascader",{staticStyle:{width:"150px","vertical-align":"middle"},attrs:{options:e.provinces,placeholder:"请选择",props:{value:"areaName",label:"areaName",children:"child"},filterable:""},on:{focus:e.F_address_city,blur:e.B_address,change:e.factory_cascader},model:{value:e.provinceAndCity,callback:function(t){e.provinceAndCity=t},expression:"provinceAndCity"}}):e._e(),"中国"!=e.ruleForm.factorys.country?a("el-input",{staticStyle:{width:"100px","vertical-align":"middle"},attrs:{placeholder:"请输入省份"},model:{value:e.ruleForm.factorys.province,callback:function(t){e.$set(e.ruleForm.factorys,"province",t)},expression:"ruleForm.factorys.province"}}):e._e(),"中国"!=e.ruleForm.factorys.country?a("el-input",{staticStyle:{width:"100px","vertical-align":"middle"},attrs:{placeholder:"请输入城市"},model:{value:e.ruleForm.factorys.city,callback:function(t){e.$set(e.ruleForm.factorys,"city",t)},expression:"ruleForm.factorys.city"}}):e._e(),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_factory.length||!e.Input_factory[0]}},[a("el-input",{staticStyle:{width:"250px","vertical-align":"middle"},attrs:{placeholder:"请输入详细地址"},on:{change:e.adressInput,focus:function(t){return e.F_address(e.ruleForm.factorys.address,"address")},blur:e.B_address,input:e.adressChange},nativeOn:{dblclick:function(t){return e.factorysDB(e.ruleForm.factorys.address,"address")}},model:{value:e.ruleForm.factorys.address,callback:function(t){e.$set(e.ruleForm.factorys,"address","string"===typeof t?t.trim():t)},expression:"ruleForm.factorys.address"}})],1),a("i",{staticClass:"el-icon-location-information",staticStyle:{"font-size":"20px","margin-left":"8px",cursor:"pointer"},on:{click:function(t){e.mapSelectMask=!0,e.searchList=[],e.mapType=1,e.ipPositon()}}})],1),a("br"),a("p",{staticClass:"fs-14 text-yellow",staticStyle:{padding:"0 0 20px 30px"}},[e._v("注：没有地址的时候请精确到城市")])],1),a("div",{staticStyle:{float:"left","margin-left":"40px",width:"985px"}},[a("p",{staticClass:"m-b-10",staticStyle:{color:"#4c4c4c"}},[e._v(" 输入/粘贴整段地址，自动识别联系人、邮箱、电话、工厂名称和地址 "),a("span",{staticStyle:{color:"red"}},[e._v("（请用逗号，隔开)")])]),a("div",{class:"en"===e.IsLanguage?"eng":"",staticStyle:{height:"150px"},attrs:{id:"box",contenteditable:"",placeholder:"请输入工厂名称，工厂地址，联系人，邮箱，电话，使用中英文逗号分隔"},on:{blur:function(t){return e.editInput("#box")}}}),a("div",{staticClass:"m-v-15",staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.factoryFull}},[e._v("智能填充")])],1)])])]),a("div",{staticClass:"b-b outItem",staticStyle:{"padding-left":"42px","padding-top":"20px","padding-right":"20px"}},[a("div",{staticClass:"fw-900 mtb20"},[e._v(" 我的信息 "),a("span",{staticStyle:{color:"#a8a6a7","font-size":"14px","font-weight":"500"}},[e._v("(标*为必填)")])]),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"pull-left"},[a("el-form-item",{staticClass:"addStart",attrs:{label:"联系人",prop:"myInfo.name"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_userinfo.length||!e.Input_userinfo[0]}},[a("el-input",{attrs:{placeholder:"姓名"},on:{input:e.adress_userInfo_Change,focus:function(t){return e.UF_address(e.ruleForm.myInfo.name,"name")},blur:e.myname_blur},nativeOn:{dblclick:function(t){return e.userInfoDB(e.ruleForm.myInfo.name,"name")}},model:{value:e.ruleForm.myInfo.name,callback:function(t){e.$set(e.ruleForm.myInfo,"name",t)},expression:"ruleForm.myInfo.name"}})],1)],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"邮箱",prop:"myInfo.email"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_userinfo.length||!e.Input_userinfo[0]}},[a("el-input",{attrs:{placeholder:"联系人邮箱地址"},on:{input:e.adress_userInfo_Change,focus:function(t){return e.UF_address(e.ruleForm.myInfo.email,"email")},blur:e.myemail_blur},nativeOn:{dblclick:function(t){return e.userInfoDB(e.ruleForm.myInfo.email,"email")}},model:{value:e.ruleForm.myInfo.email,callback:function(t){e.$set(e.ruleForm.myInfo,"email","string"===typeof t?t.trim():t)},expression:"ruleForm.myInfo.email"}})],1)],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"手机号码",prop:"myInfo.phone"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_userinfo.length||!e.Input_userinfo[0]}},[a("el-input",{attrs:{placeholder:"手机或固定电话"},on:{input:e.adress_userInfo_Change,focus:function(t){return e.UF_address(e.ruleForm.myInfo.phone,"phone")},blur:e.myphone_blur},nativeOn:{dblclick:function(t){return e.userInfoDB(e.ruleForm.myInfo.phone,"phone")}},model:{value:e.ruleForm.myInfo.phone,callback:function(t){e.$set(e.ruleForm.myInfo,"phone","string"===typeof t?t.trim():t)},expression:"ruleForm.myInfo.phone"}})],1)],1),a("br"),a("el-form-item",{attrs:{label:"公司名称"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"双击切换",placement:"top-start",disabled:0==e.Input_userinfo.length||!e.Input_userinfo[0]}},[a("el-input",{attrs:{placeholder:"委托方"},on:{input:e.adress_userInfo_Change,focus:function(t){return e.UF_address(e.ruleForm.myInfo.company_name,"company_name")},blur:e.my_company_name},nativeOn:{dblclick:function(t){return e.userInfoDB(e.ruleForm.myInfo.company_name,"company_name")}},model:{value:e.ruleForm.myInfo.company_name,callback:function(t){e.$set(e.ruleForm.myInfo,"company_name",t)},expression:"ruleForm.myInfo.company_name"}})],1)],1),a("el-form-item",{attrs:{label:"备用电话",prop:"myInfo.spare_phone"}},[a("el-input",{attrs:{placeholder:"建议填写，以保持畅通"},on:{input:e.adress_userInfo_Change,focus:function(t){return e.UF_address(e.ruleForm.myInfo.spare_phone,"spare_phone")},blur:e.UB_address},nativeOn:{dblclick:function(t){return e.userInfoDB(e.ruleForm.myInfo.spare_phone,"spare_phone")}},model:{value:e.ruleForm.myInfo.spare_phone,callback:function(t){e.$set(e.ruleForm.myInfo,"spare_phone",t)},expression:"ruleForm.myInfo.spare_phone"}})],1),a("br")],1),a("div",{staticStyle:{float:"left","margin-left":"40px",width:"985px"}},[a("p",{staticClass:"m-b-10",staticStyle:{color:"#4c4c4c"}},[e._v(" 输入/粘贴整段地址，自动识别联系人、邮箱、电话、公司名称 "),a("span",{staticStyle:{color:"red"}},[e._v("（请用逗号，隔开）")])]),a("div",{class:"en"===e.IsLanguage?"eng":"",staticStyle:{height:"150px"},attrs:{id:"userInfo",contenteditable:""},on:{blur:function(t){return e.editInput("#userInfo")}}}),a("div",{staticClass:"pull-right m-t-15 m-b-10",staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.myInfoFull}},[e._v("智能填充")])],1)])])]),a("div",{staticClass:"b-b outItem",staticStyle:{"padding-left":"42px","padding-top":"20px","padding-right":"20px","padding-bottom":"20px"}},[a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"fw-900 mtb20 d-inline-block",staticStyle:{"margin-right":"10px"}},[e._v("产品信息")]),a("span",{staticClass:"fs-12 text-grey"},[e._v("(请上传或填写商品信息，上传信息请包括验货资料，如合同、装箱单、验货要求等)")]),a("div",{staticStyle:{position:"absolute",top:"0px",right:"0"}},[a("el-button",{staticStyle:{"border-radius":"5px","margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){return e.tempDown()}}},[e._v("下载")]),a("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"middle","margin-left":"10px"},attrs:{accept:".xls, .xlsx",action:e.host.file+"/api/u_d/Import","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary"}},[e._v("导入")])],1)],1)]),[a("div",{staticStyle:{overflow:"hidden"}},[e._l(e.ruleForm.productInfo,(function(t,r){return a("div",{key:r,staticClass:"m-t-10"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{class:t.hidden?"el-icon-caret-right":"el-icon-caret-bottom",staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(e){t.hidden=!t.hidden}}}),a("el-form-item",{attrs:{label:"产品分类",prop:"productInfo_category_id","label-width":"en"===e.znoren?"150px":"110px"}},[a("el-cascader",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",props:e.props,filterable:"",options:e.categoryList},model:{value:t.category_id,callback:function(r){e.$set(t,"category_id",r)},expression:"item.category_id"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{"label-width":"en"===e.znoren?"90px":"70px",label:"P.O号",prop:"productInfo_po_id"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入P.O号"},on:{input:e.adress_product_Change,focus:function(a){return e.PF_address(r,t.po_num,"po_num")},blur:e.PB_address},nativeOn:{dblclick:function(a){return e.productDB(r,t.po_num,"po_num")}},model:{value:t.po_num,callback:function(r){e.$set(t,"po_num",r)},expression:"item.po_num"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品名称","label-width":"en"===e.znoren?"120px":"70px",prop:"productInfo_product_name"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入产品名称"},on:{input:e.adress_product_Change,focus:function(a){return e.PF_address(r,t.product_name,"product_name")},blur:e.PB_address},nativeOn:{dblclick:function(a){return e.productDB(r,t.product_name,"product_name")}},model:{value:t.product_name,callback:function(r){e.$set(t,"product_name",r)},expression:"item.product_name"}})],1),r==e.ruleForm.productInfo.length-1?a("i",{staticClass:"el-icon-plus d-inline-block bg-grey",staticStyle:{padding:"7px",cursor:"pointer"},on:{click:e.addProductAllRow}}):e._e(),a("i",{staticClass:"el-icon-close d-inline-block bg-grey m-l-10",staticStyle:{padding:"7px",cursor:"pointer"},on:{click:function(a){return e.delProductAllRow(t,r)}}})],1)],1),e._l(t.models,(function(s,n){return a("div",{key:n,class:["bg-grey","product-children",t.hidden?"hidden":""]},[a("el-form-item",{staticClass:"mtb10",attrs:{label:"产品型号","label-width":"120px",prop:"product_type"}},[a("el-input",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{placeholder:"请输入产品型号"},on:{input:e.adress_product_Change,focus:function(t){return e.PF_address(r,s.mark,"mark")},blur:e.PB_address},nativeOn:{dblclick:function(t){return e.productDB_child(r,n,s.mark,"mark")}},model:{value:s.mark,callback:function(t){e.$set(s,"mark",t)},expression:"item2.mark"}})],1),a("el-form-item",{staticClass:"mtb10"},[a("el-input",{staticStyle:{width:"200px"},attrs:{min:"1",placeholder:"请输入数量",type:"number"},on:{input:e.adress_product_Change,focus:function(t){return e.PF_address(r,s.amount,"amount")},blur:e.PB_address},nativeOn:{dblclick:function(t){return e.productDB_child(r,n,s.amount,"amount")}},model:{value:s.amount,callback:function(t){e.$set(s,"amount",t)},expression:"item2.amount"}},[a("el-select",{staticStyle:{width:"60px"},attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:s.unit,callback:function(t){e.$set(s,"unit",t)},expression:"item2.unit"}},e._l(e.unitList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),n==t.models.length-1?a("i",{staticClass:"el-icon-plus d-inline-block bg-grey",staticStyle:{padding:"7px",cursor:"pointer"},on:{click:function(t){return e.addProductTypeRow(r)}}}):e._e(),a("i",{staticClass:"el-icon-close d-inline-block bg-grey m-l-10",staticStyle:{padding:"7px",cursor:"pointer"},on:{click:function(t){return e.delProductTypeRow(r,n)}}})],1)}))],2)})),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("i",{class:e.handleZNshow?"el-icon-d-arrow-left":"el-icon-d-arrow-right",staticStyle:{transform:"rotate(90deg)",cursor:"pointer","font-size":"20px"},on:{click:function(t){e.handleZNshow=!e.handleZNshow}}})]),e.handleZNshow?a("div",{staticStyle:{float:"left","margin-left":"40px",width:"985px","margin-top":"20px"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请依次输入产品信息，使用中英文逗号分隔"},model:{value:e.proInfoAutoFullForm,callback:function(t){e.proInfoAutoFullForm=t},expression:"proInfoAutoFullForm"}}),a("div",{staticClass:"pull-right m-t-15 m-b-10",staticStyle:{width:"100%","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.proInfoFull}},[e._v("智能填充")])],1)],1):e._e()],2)],a("div",{staticClass:"fw-700 mtb20 d-inline-block",staticStyle:{"margin-right":"10px"}},[e._v(" 附件上传 "),a("span",{staticClass:"fs-12 text-grey",staticStyle:{"font-weight":"500"}},[e._v("(只支持上传PDF、PPT、Word、Jpg、Png、zip、rar格式，单个小于100M)")])]),a("el-upload",{ref:"upload",attrs:{action:e.host.file+"/api/a_u/upload_file","list-type":"text","on-preview":e.handlePictureCardPreview,"on-success":e.uploadSuccess,"on-remove":e.handleRemove,"before-upload":e.checkFile,multiple:!0}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传")])],1)],2),a("div",{staticClass:"b-b outItem",staticStyle:{"padding-left":"42px","padding-top":"20px","padding-right":"20px"}},[a("div",{staticClass:"fw-900 mtb20 d-inline-block",staticStyle:{"margin-right":"10px"}},[e._v("样品及注意事项")]),a("div",[a("el-form-item",{attrs:{label:"提供样品",prop:"sample"}},[a("el-radio-group",{model:{value:e.ruleForm.sampleForm.sample,callback:function(t){e.$set(e.ruleForm.sampleForm,"sample",t)},expression:"ruleForm.sampleForm.sample"}},[a("el-radio",{attrs:{label:1}},[e._v("未提供样品")]),a("el-radio",{attrs:{label:2}},[e._v("送往或已在工厂")]),a("el-radio",{attrs:{label:3}},[e._v("送往验货在线")])],1)],1),a("br"),1==e.ruleForm.type||3==e.ruleForm.type||6==e.ruleForm.type?a("div",{staticClass:"bzsx"},[a("el-form-item",{attrs:{label:"抽样标准",prop:"standard","label-width":"110px"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.sampleForm.standard,callback:function(t){e.$set(e.ruleForm.sampleForm,"standard",t)},expression:"ruleForm.sampleForm.standard"}},e._l(e.samplingList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"AQL CRITICAL",prop:"critical","label-width":"110px"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.sampleForm.critical,callback:function(t){e.$set(e.ruleForm.sampleForm,"critical",t)},expression:"ruleForm.sampleForm.critical"}},e._l(e.AQLList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"MAJOR",prop:"major"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.sampleForm.major,callback:function(t){e.$set(e.ruleForm.sampleForm,"major",t)},expression:"ruleForm.sampleForm.major"}},e._l(e.MajorList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"MINOR",prop:"minor"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.sampleForm.minor,callback:function(t){e.$set(e.ruleForm.sampleForm,"minor",t)},expression:"ruleForm.sampleForm.minor"}},e._l(e.MinorList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1):e._e(),a("br"),a("div",{staticStyle:{"padding-left":"43px"}},[a("span",{staticStyle:{color:"#606266","padding-bottom":"10px"}},[e._v("注意事项更改")]),a("el-input",{staticStyle:{width:"90%","margin-top":"30px",display:"block"},attrs:{type:"textarea",rows:"5",placeholder:"哪些问题需要验货员特别注意关注，例：重点查看外观是否有刮痕"},model:{value:e.ruleForm.sampleForm.remark,callback:function(t){e.$set(e.ruleForm.sampleForm,"remark",t)},expression:"ruleForm.sampleForm.remark"}})],1)],1),a("div",{staticClass:"mtb20",staticStyle:{"margin-left":"43px"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.saveIsLoad,expression:"saveIsLoad",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{"margin-right":"40px"},attrs:{type:"primary",disabled:e.saveIsLoad},on:{click:function(t){e.is_draft=0,e.submit()}}},[e._v("下一步")]),a("el-button",{attrs:{disabled:e.saveIsLoad},on:{click:function(t){e.is_draft=1,e.submit()}}},[e._v("保存")])],1)])]),e.factoryDialog?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"工厂信息智能填写",visible:e.factoryDialog,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.factoryDialog=t}}},[a("el-input",{attrs:{clearable:"",type:"textarea",rows:5,placeholder:"请输入联系人邮箱，手机号，使用英文字符逗号分隔。如xx联系人，xxx@qq.com,139xxxxxxxx，"},model:{value:e.factoryAutoFullForm,callback:function(t){e.factoryAutoFullForm=t},expression:"factoryAutoFullForm"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.factoryFull}},[e._v("确定")])],1)],1):e._e(),e.myInfoDialog?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"我的信息智能填写",visible:e.myInfoDialog,"close-on-press-escape":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.myInfoDialog=t}}},[a("el-input",{attrs:{clearable:"",type:"textarea",rows:5,placeholder:"请输入联系人邮箱，手机号，使用英文字符逗号分隔。如xx联系人，xxx@qq.com,139xxxxxxxx，"},model:{value:e.myInfoAutoFullForm,callback:function(t){e.myInfoAutoFullForm=t},expression:"myInfoAutoFullForm"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.myInfoFull}},[e._v("确定")])],1)],1):e._e(),e.addressSelectMask?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"从地址簿选择",visible:e.addressSelectMask,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.addressSelectMask=t}}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content"},[a("el-input",{staticStyle:{width:"400px"},attrs:{clearable:"",placeholder:"联系人/电话/详细地址/邮箱"},model:{value:e.filters.select_value,callback:function(t){e.$set(e.filters,"select_value",t)},expression:"filters.select_value"}},[a("el-select",{staticStyle:{width:"120px",color:"#333"},attrs:{slot:"prepend",clearable:"",placeholder:"请选择"},slot:"prepend",model:{value:e.filters.select_type,callback:function(t){e.$set(e.filters,"select_type",t)},expression:"filters.select_type"}},[a("el-option",{attrs:{label:"联系人",value:"name"}}),a("el-option",{attrs:{label:"电话",value:"phone"}}),a("el-option",{attrs:{label:"详细地址",value:"address"}}),a("el-option",{attrs:{label:"邮箱",value:"email"}})],1),a("el-button",{attrs:{slot:"append",type:"success"},on:{click:function(t){return e.getFactoryAddressList()}},slot:"append"},[e._v("搜索")])],1)],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content text-right"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addressAddMask=!0,e.addressAddForm.autoFull="",e.addressHandleType=1,e.clearAddressAddForm()}}},[e._v("新增")])],1)])],1),a("div",{staticClass:"table o-x-auto h-300 m-t-20",attrs:{id:"addressTable"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.addressSelectList}},[a("el-table-column",{attrs:{label:"选择",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"select_adress",attrs:{label:t.row.id},nativeOn:{change:function(r){return e.handleCheck(t.$index,t.row)}},model:{value:e.templateRadio,callback:function(t){e.templateRadio=t},expression:"templateRadio"}})]}}],null,!1,4158765189)}),a("el-table-column",{attrs:{prop:"name",label:"联系人"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"address",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s((t.row.country||"")+(t.row.province||"")+(t.row.city||"")+(t.row.address||"")))]}}],null,!1,2475806165)}),a("el-table-column",{attrs:{prop:"company_name",label:"公司名称"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"address-btn m-r-20",on:{click:function(r){return e.addressEdit(t.row)}}},[e._v("编辑")]),a("span",{staticClass:"address-btn",on:{click:function(r){return e.facatoryDelAddress(t.row)}}},[e._v("删除")])]}}],null,!1,2910856590)})],1),a("Pagination",{attrs:{total:e.addressSelectTotal,pageSize:e.pageNumber,currentPage:e.factorysAddressIdx},on:{"update:pageSize":function(t){e.pageNumber=t},"update:page-size":function(t){e.pageNumber=t},"update:currentPage":function(t){e.factorysAddressIdx=t},"update:current-page":function(t){e.factorysAddressIdx=t},getData:e.getFactoryAddressList}})],1),e.addressSelectList.length?e._e():a("div",{staticClass:"text-yellow",staticStyle:{"text-align":"center"}},[e._v("下单后工厂地址会自动收录到地址簿")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){e.addressSelectMask=!1}}},[e._v("关闭弹窗")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tableCheckedGetData(e.rowData),e.addressSelectMask=!1}}},[e._v("地址填充")])],1)],1):e._e(),e.addressAddMask?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑工厂信息",visible:e.addressAddMask,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"500px",id:"addressAddMask"},on:{"update:visible":function(t){e.addressAddMask=t}}},[a("p",{staticClass:"m-b-10 text-grey"},[e._v("例：埃克斯家居，浙江省宁波北环东路499号，李念，sales1@aikesijiaju.com，13766664444")]),a("div",{staticClass:"addressAddMask-textArea"},[a("el-input",{attrs:{clearable:"",type:"textarea",rows:"5",placeholder:"请输入联系人邮箱，手机号，使用英文字符逗号分隔。如xx联系人，xxx@qq.com,139xxxxxxxx，",maxlength:"100","show-word-limit":""},model:{value:e.addressAddForm.autoFull,callback:function(t){e.$set(e.addressAddForm,"autoFull",t)},expression:"addressAddForm.autoFull"}}),a("el-button",{staticClass:"zlsb-btn",attrs:{size:"mini"},on:{click:e.addressAddFormAutoFullForm}},[e._v("智能识别")])],1),a("el-form",{ref:"addressAddForm",attrs:{model:e.addressAddForm,"label-width":"100px",id:"addressAddForm",rules:e.rules}},[a("el-form-item",{staticClass:"addStart",attrs:{label:"工厂名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.factory_name,callback:function(t){e.$set(e.addressAddForm,"factory_name",t)},expression:"addressAddForm.factory_name"}})],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"联系人"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.name,callback:function(t){e.$set(e.addressAddForm,"name",t)},expression:"addressAddForm.name"}})],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.phone,callback:function(t){e.$set(e.addressAddForm,"phone","string"===typeof t?t.trim():t)},expression:"addressAddForm.phone"}})],1),a("el-form-item",{attrs:{label:"备用电话",prop:"spare_phone"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.spare_phone,callback:function(t){e.$set(e.addressAddForm,"spare_phone","string"===typeof t?t.trim():t)},expression:"addressAddForm.spare_phone"}})],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.email,callback:function(t){e.$set(e.addressAddForm,"email","string"===typeof t?t.trim():t)},expression:"addressAddForm.email"}})],1),a("el-form-item",{staticClass:"clear addStart",attrs:{label:"所属区域"}},[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:"",filterable:"",placeholder:"请选择国家"},on:{change:function(t){e.addressAddForm.area="",e.addressAddForm.province="",e.addressAddForm.city,e.addressAddForm=Object.assign({},e.addressAddForm)}},model:{value:e.addressAddForm.country,callback:function(t){e.$set(e.addressAddForm,"country",t)},expression:"addressAddForm.country"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1),"中国"==e.addressAddForm.country?a("el-cascader",{staticStyle:{width:"150px"},attrs:{clearable:"",options:e.provinces,placeholder:"请选择",props:{value:"areaName",label:"areaName",children:"child"},filterable:""},on:{change:function(t){e.addressAddForm.address=""}},model:{value:e.addressAddForm.area,callback:function(t){e.$set(e.addressAddForm,"area",t)},expression:"addressAddForm.area"}}):a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请输入省份"},model:{value:e.addressAddForm.province,callback:function(t){e.$set(e.addressAddForm,"province",t)},expression:"addressAddForm.province"}}),"中国"!=e.addressAddForm.country?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请输入城市"},model:{value:e.addressAddForm.city,callback:function(t){e.$set(e.addressAddForm,"city",t)},expression:"addressAddForm.city"}}):e._e()],1),a("el-form-item",{staticClass:"addStart",attrs:{label:"详细地址"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.area_details,callback:function(t){e.$set(e.addressAddForm,"area_details","string"===typeof t?t.trim():t)},expression:"addressAddForm.area_details"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFacatoryAddress}},[e._v("确定")])],1)],1):e._e(),e.mapSelectMask?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"地址选择",visible:e.mapSelectMask,"close-on-press-escape":!1,"close-on-click-modal":!1,fullscreen:!0,"show-close":!1,top:"0",width:"1200px",id:"mapSelectMask","before-close":e.clearSelectAddress},on:{"update:visible":function(t){e.mapSelectMask=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.mapMaskShow,expression:"mapMaskShow"}],attrs:{id:"map-mask"}}),a("baidu-map",{staticClass:"amap-box",staticStyle:{height:"100%"},attrs:{zoom:e.zoom,center:e.center,dragging:!0,"scroll-wheel-zoom":!0},on:{click:e.getPosition}},[a("bm-marker",{attrs:{position:e.center,dragging:!0,animation:"BMAP_ANIMATION_BOUNCE"}}),a("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),a("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP","BMAP_SATELLITE_MAP"],anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),a("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),a("bm-overview-map",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",isOpen:!0}})],1),a("div",{attrs:{id:"map-search-group"}},[a("el-select",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:"",filterable:"",placeholder:"请选择国家"},on:{change:function(t){e.mapSelectForm.area=["",""],e.mapSelectForm.province="",e.mapSelectForm.city,e.mapSelectForm=Object.assign({},e.mapSelectForm)}},model:{value:e.mapSelectForm.country,callback:function(t){e.$set(e.mapSelectForm,"country",t)},expression:"mapSelectForm.country"}},e._l(e.countryList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1),"中国"==e.mapSelectForm.country?a("el-cascader",{staticStyle:{width:"150px"},attrs:{clearable:"",options:e.provinces,placeholder:"请选择",props:{value:"areaName",label:"areaName",children:"child"},filterable:""},on:{change:function(t){e.mapSelectForm.details=""}},model:{value:e.mapSelectForm.area,callback:function(t){e.$set(e.mapSelectForm,"area",t)},expression:"mapSelectForm.area"}}):a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请输入省份"},model:{value:e.mapSelectForm.province,callback:function(t){e.$set(e.mapSelectForm,"province",t)},expression:"mapSelectForm.province"}}),"中国"!=e.mapSelectForm.country?a("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请输入城市"},model:{value:e.mapSelectForm.city,callback:function(t){e.$set(e.mapSelectForm,"city",t)},expression:"mapSelectForm.city"}}):e._e(),a("el-input",{staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请输入详细地址"},model:{value:e.mapSelectForm.details,callback:function(t){e.$set(e.mapSelectForm,"details","string"===typeof t?t.trim():t)},expression:"mapSelectForm.details"}}),a("div",{staticClass:"checked-address",on:{click:e.saveSelectAddress}},[e._v("确认选择")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.mapSelectMask=!1}}},[e._v("返回")])],1)],1):e._e(),a("transition",{attrs:{name:"kfglbar",mode:"out-in"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.kfglbarIsMin,expression:"kfglbarIsMin"}],staticClass:"min-kfgl-bar text-center",on:{click:function(t){e.kfglbarIsMin=!1,e.kfglMask=!0}}},[e._v("地址设置")])])],1),a("div",{attrs:{id:"map-box1"}})],1)},s=[],n=(r("a4d3"),r("99af"),r("4de4"),r("4160"),r("caad"),r("c975"),r("a15b"),r("d81d"),r("fb6a"),r("a434"),r("0d03"),r("b0c0"),r("a9e3"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("6062"),r("2532"),r("3ca3"),r("466d"),r("5319"),r("841c"),r("1276"),r("159b"),r("ddb0"),r("284c")),o=(r("96cf"),r("2fa7")),i=r("2f62"),l=(r("bc3a"),r("2f11")),c=r("1157"),d=r.n(c),u=r("ac6e");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"email-manage",data:function(){var e;return e={YHMoney:{},currentPathName:"",menus:[{path:"http://www.inspector.ltd/#/index/index",name:"index",label:"首页",translate:"layout_home"},{path:"http://www.inspector.ltd/#/insp/orderManage",name:"wantOrder",label:"我的订单",translate:"layout_wddd"},{path:"http://www.inspector.ltd/#/index/index",name:"ourServer",label:"我们的服务",translate:"layout_wmdfw"},{path:"http://www.inspector.ltd/#/index/aboutUs",name:"aboutUs",label:"关于我们",translate:"layout_aywm"}],znoren:"zh",handleZNshow:!1,dialogTitle:"",center:{lng:106.5571394,lat:29.5710002},zoom:6,citysearch:"",geocoder:"",expireTimeOption:{disabledDate:function(e){return e.getTime()<=Date.now()-864e5}},fullscreenLoading:!1,value1:"",mapMaskShow:!1,map:"",addressList:[],addressListOptions:{label:"name",value:"name",children:"child"},marker:"",trafficLayer:null,mapSelectMask:!1,mapType:0,mapSelectForm:{},saveIsLoad:!1,host:this.$host,factoryDialog:!1,factoryAutoFullForm:"",myInfoDialog:!1,myInfoAutoFullForm:"",proInfoAutoFullForm:"",addressSelectMask:!1,addressSelectList:[],addressSelectTotal:0,addressSearch:"",saveAddressSearch:"",factorysAddressIdx:1,pageNumber:15,addressTmpEditData:{},addressHandleType:1,addressAddMask:!1,addressAddForm:{autoFull:"",factory_name:"",name:"",phone:"",spare_phone:"",email:"",area:["中国","北京"],area_details:"",setDefaultAddress:!1},provinceAndCity:[]},Object(o["a"])(e,"mapSelectForm",{area:["中国","北京"],details:"",position:[]}),Object(o["a"])(e,"countryList",[]),Object(o["a"])(e,"chinaCityList",[]),Object(o["a"])(e,"categoryList",[]),Object(o["a"])(e,"is_draft",0),Object(o["a"])(e,"props",{label:"zh"===(localStorage.getItem("locale")||"zh")?"name":"name_en",value:"id",children:"child",emitPath:!1}),Object(o["a"])(e,"rules",{phone:[{required:!0,message:"请输入联系电话",trigger:"change"},{validator:this.$check.isPhone,trigger:"change"}],spare_phone:[{validator:this.$check.isPhone,trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"change"},{validator:this.$check.isEmails,trigger:"change"}],address:[{required:!0,message:"请输入工厂地址",trigger:"change"}]}),Object(o["a"])(e,"rulesForm",{"factorys.name":[{required:!0,message:"请输入联系人",trigger:"change"}],"factorys.phone":[{required:!0,message:"请输入联系电话",trigger:"change"},{validator:this.$check.isPhone,trigger:"change"}],"factorys.spare_phone":[{validator:this.$check.isPhone,trigger:"change"}],"factorys.email":[{required:!0,message:"请输入邮箱",trigger:"change"},{validator:this.$check.isEmails,trigger:"change"}],"factorys.city":[{required:!0,message:"请输入工厂地址",trigger:"change"}],"myInfo.name":[{required:!0,message:"请输入联系人",trigger:"change"}],"myInfo.phone":[{required:!0,message:"请输入联系电话",trigger:"change"},{validator:this.$check.isPhone,trigger:"change"}],"myInfo.spare_phone":[{validator:this.$check.isPhone,trigger:"change"}],"myInfo.email":[{required:!0,message:"请输入邮箱",trigger:"change"},{validator:this.$check.isEmails,trigger:"change"}]}),Object(o["a"])(e,"dialogImageUrl",""),Object(o["a"])(e,"dialogVisible",!1),Object(o["a"])(e,"fileList",[]),Object(o["a"])(e,"radio",""),Object(o["a"])(e,"templateRadio",""),Object(o["a"])(e,"ruleForm",{date:new Date((new Date).getTime()+864e5),type:1,productInfo:[{category_id:"",po_num:"",product_name:"",hidden:!1,models:[{mark:"",amount:"",unit:"个"}]}],myInfo:{company_name:"",name:"",phone:"",email:"",spare_phone:""},factorys:{company_name:"",country:"中国",province:"",city:"",address:"",name:"",phone:"",email:"",spare_phone:""},sampleForm:{sample:1,standard:"II级",critical:0,major:2.5,minor:4,remark:""}}),Object(o["a"])(e,"select",""),Object(o["a"])(e,"samplingList",["II级","I级","III级","S-1","S-2","S-3"]),Object(o["a"])(e,"AQLList",["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"]),Object(o["a"])(e,"MajorList",["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"]),Object(o["a"])(e,"MinorList",["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"]),Object(o["a"])(e,"searchList",[]),Object(o["a"])(e,"yhFeeType",["us_insp_fee","full_fee","line_insp_fee","fac_insp_fee","sup_insp_fee","and_insp_fee"]),Object(o["a"])(e,"filters",{select_value:"",select_type:"name"}),Object(o["a"])(e,"rowData",{}),Object(o["a"])(e,"check",""),Object(o["a"])(e,"props_country",this.$route.query.props_country||"中国"),Object(o["a"])(e,"props_province",this.$route.query.props_province||"北京"),Object(o["a"])(e,"props_city",this.$route.query.props_city||"北京"),Object(o["a"])(e,"props_insp_address",this.$route.query.props_insp_address||""),Object(o["a"])(e,"props_long_lat",this.$route.query.props_long_lat||""),Object(o["a"])(e,"kfglMask",!1),Object(o["a"])(e,"kfglIsFullscreen",!1),Object(o["a"])(e,"kfglbarIsMin",!1),Object(o["a"])(e,"Input_factory",[]),Object(o["a"])(e,"Input_userinfo",[]),Object(o["a"])(e,"Input_product",[]),Object(o["a"])(e,"is_factoryEdit",!1),Object(o["a"])(e,"targetIdx",0),Object(o["a"])(e,"targetFactoryInput",""),Object(o["a"])(e,"is_userInfoEdit",!1),Object(o["a"])(e,"targetIdx_userInfo",0),Object(o["a"])(e,"targetUserinfoInput",""),Object(o["a"])(e,"is_productEdit",!1),Object(o["a"])(e,"targetIdx_product",0),Object(o["a"])(e,"targetProductInput",""),Object(o["a"])(e,"isdisabled",{company_name_isdisabled:!0,name_isdisabled:!0,email_isdisabled:!0,phone_isdisabled:!0}),Object(o["a"])(e,"My_isdisabled",{company_name_isdisabled:!0,name_isdisabled:!0,email_isdisabled:!0,phone_isdisabled:!0}),e},props:{},created:function(){this.getCountryList(),this.getCityList(),this.getCategory(),this.getPerpleInfo(),this.getAddressList(),this.getYHMoney()},watch:{kfglIsFullscreen:function(e){e?d()("#mapSelectMask /deep/ .el-dialog__body").css("height","100%"):d()("#mapSelectMask /deep/ .el-dialog__body").css("height","600px")}},methods:{getYHMoney:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(u["a"])());case 2:e=t.sent,this.YHMoney=e.data.data;case 4:case"end":return t.stop()}}),null,this)},handleClick:function(e){var t=e.name,r=e.path;this.currentPathName=t,window.open(r)},handleCurrentChange:function(e){e.id&&(this.templateRadio=e.id),this.rowData=e},handleAvatarSuccess:function(e,t){var r=this,a=e.data,s=e.code,n=e.msg;200==s&&(this.ruleForm.productInfo=[],a.forEach((function(e){r.ruleForm.productInfo.push({category_id:"",po_num:e.po,product_name:e.product,hidden:!1,models:[{mark:e.product,amount:e.number,unit:"个"}]})})),this.$message.success(n))},beforeAvatarUpload:function(e){},tempDown:function(){window.open("http://api.globalinsp.com/产品信息模板.xlsx")},factory_cascader:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=this.provinceAndCity.join(""),t=d()("#box").children(),t.eq(this.targetIdx).text(e+this.ruleForm.factorys.address),r.next=5,regeneratorRuntime.awrap(this.getAddressSearch_change_city(this.ruleForm.factorys.address));case 5:case"end":return r.stop()}}),null,this)},userInfo_FInput:function(){d()("#userInfo").children();this.myInfoFull()},product_FInput:function(){this.is_productEdit&&this.proInfoFull()},FInput:function(){this.factoryFull()},factoryInput:function(){if(this.is_factoryEdit){var e=d()("#box"),t=e.text();this.Input_factory=t.split(/[,，、\n]/),this.Input_factory=this.Input_factory.map((function(e){return-1!=e.indexOf(":")?e.split(":")[e.split(":").length-1]:-1!=e.indexOf("：")?e.split("：")[e.split("：").length-1]:e}));for(var r=this.Input_factory,a=/^\w+@\w+(\.\w+)+$/,s=0;s<r.length;s++)if(a.test(r[s])){this.ruleForm.factorys.email=r[s];break}for(var n=/^1[3456789]\d{9}$/,o=0;o<r.length;o++)if(n.test(r[o])){this.ruleForm.factorys.phone=r[o];break}for(var i=/^[((\+\d+)*)(\d+\-)*]*\s*\d+$/,l=0;l<r.length;l++)if(i.test(r[l])){this.ruleForm.factorys.spare_phone=r[l];break}this.ruleForm.factorys.company_name=r[0],this.ruleForm.factorys.name=r[2]}},editInput:function(e){var t=d()(e),r=t.text(),a=r.replace(/\r\n/g,","),s=a.split(/[,，、\n ]/),n=s.map((function(e){return"<span>".concat(e,"</span>")}));t.html(n.join(",")),t.children().mouseover((function(){d()(this).css({color:"#fa7202"})})).mouseout((function(){d()(this).css({color:"#333"})}));var o=this;t.children().each((function(t,r){d()(this).click((function(){d()(this).css({color:"#fa7202"}).siblings().css({color:"#333"}),"#box"==e?o.factoryclick(0===t?"company_name":1===t?"address":2===t?"name":3===t?"email":4===t?"phone":"spare_phone",d()(this)[0].innerText):"#userInfo"==e&&o.userInfoclick(0===t?"company_name":1===t?"name":2===t?"email":3===t?"phone":"spare_phone",d()(this)[0].innerText)}))}))},closekfglMask:function(){this.mapSelectMask=!1},checkExit:function(e){var t,r,a,s;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.email_blur(e),n.next=3,regeneratorRuntime.awrap(Object(u["x"])({email:e}));case 3:t=n.sent,r=t.data,a=r.code,s=r.msg,200==a&&this.$message.error(s);case 6:case"end":return n.stop()}}),null,this)},getPosition:function(e){var t=e.point;this.center=t;var r=new BMap.Geocoder,a=this;this.mapSelectForm.details?this.zoom=15:this.zoom=10,r.getLocation(t,(function(e){var t=e.addressComponents;a.mapSelectForm.country="中国",a.mapSelectForm.area=[t.province,t.city],a.mapSelectForm.details=t.district+t.street+t.streetNumber}))},handleCheck:function(e,t){this.rowData=t},tableCheckedGetData:function(e){var t=e.company_name,r=e.name,a=e.phone,s=e.spare_phone,n=e.email,o=e.country,i=e.province,l=e.city,c=e.address;this.ruleForm.factorys={company_name:t,country:o,province:i,city:l,address:c,name:r,phone:a,email:n,spare_phone:s},this.provinceAndCity=[i,l],this.addressSelectMask=!1},closeMapMask:function(){d()("#map-mask").click(),this.mapMaskShow=!1},saveSelectAddress:function(){0==this.mapType?(this.addressAddForm.area_details=this.mapSelectForm.details,this.addressAddForm.area=this.mapSelectForm.area.concat()):(this.mapSelectForm.area&&(this.provinceAndCity=this.mapSelectForm.area),this.ruleForm.factorys.address=this.mapSelectForm.details),this.mapSelectMask=!1},clearSelectAddress:function(e){this.mapSelectForm.area=["",""],this.mapSelectForm.details="",this.mapSelectForm.position=["",""],this.marker&&this.marker.setMap(null),e()},adressInput:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.ruleForm.factorys.city,t.next=3,regeneratorRuntime.awrap(this.getAddressSearchFromGaode(null,e,this.provinceAndCity[1],!0,!0));case 3:case"end":return t.stop()}}),null,this)},getAddressSearch_change_city:function(e){var t,r,a,s;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return t={query:e,region:this.provinceAndCity[0]||this.provinceAndCity[1]||e},r=null,n.prev=2,n.next=5,regeneratorRuntime.awrap(Object(u["c"])(t));case 5:r=n.sent,n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](2);case 10:a=r.data.data.results?r.data.data.results:[],s=a.slice(0,10).map((function(e){return e.value=e.name,e})),s[0].location&&(this.props_long_lat=[s[0].location.lng,s[0].location.lat].join(","));case 13:case"end":return n.stop()}}),null,this,[[2,8]])},getAddressSearchFromGaode:function(e,t,r,a,s){var n,o,i,l,c,d,p;return regeneratorRuntime.async((function(m){while(1)switch(m.prev=m.next){case 0:return n={query:t||r||"浙江省宁波市",region:this.provinceAndCity[0]||this.provinceAndCity[1]||t},o=null,m.prev=2,m.next=5,regeneratorRuntime.awrap(Object(u["c"])(n));case 5:o=m.sent,m.next=12;break;case 8:return m.prev=8,m.t0=m["catch"](2),this.$check.error.call(this,"位置无法识别"),m.abrupt("return");case 12:if(i=o.data.data.results?o.data.data.results:[],i.length){m.next=16;break}return this.$message.error("位置无法识别"),m.abrupt("return");case 16:if(l=i.slice(0,10).map((function(e){return e.value=e.name,e})),l.length){m.next=20;break}return this.ruleForm.factorys.address="",m.abrupt("return");case 20:if(this.searchList=l,c=l[0].province,d=l[0].city,s){this.provinceAndCity=[c,d];try{p=t.replace(c.replace("省",""),"").replace(d.replace("市",""),""),this.ruleForm.factorys.address=p.replace("省","").replace("市","")}catch(h){}}else this.addressAddForm.area=[c,d],this.addressAddForm.area_details=l[0].address;if(this.mapSelectForm.proAndCity=[c,d],!l[0].location){m.next=30;break}this.props_long_lat=[l[0].location.lng,l[0].location.lat].join(","),this.center=l[0].location,m.next=32;break;case 30:return this.$message.error("位置无法识别"),m.abrupt("return");case 32:if(!a){m.next=34;break}return m.abrupt("return");case 34:e(l);case 35:case"end":return m.stop()}}),null,this,[[2,8]])},findAddress:function(e){var t=new BMap.Map("map-box1"),r={onSearchComplete:function(e){a.getStatus(),BMAP_STATUS_SUCCESS}},a=new BMap.LocalSearch(t,r);a.search(e)},querySearchAsync:function(e,t){this.getAddressSearchFromGaode(t,this.mapSelectForm.details,this.mapSelectForm.area[1])},ipPositon:function(e){var t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e?(t=this,r=new AMap.CitySearch,r.getLocalCity((function(e,r){if("complete"===e&&"OK"===r.info&&r&&r.city&&r.bounds){if(!r.bounds)return;t.mapSelectForm.position=[r.rectangle.split(",")[0],r.rectangle.split(",")[1]]}}))):("","",this.mapSelectForm.country=this.ruleForm.factorys.country,this.mapSelectForm.area=this.provinceAndCity||[this.ruleForm.factorys.province,this.ruleForm.factorys.city],this.mapSelectForm.details=this.ruleForm.factorys.address,a=this.mapSelectForm.details||this.mapSelectForm.area[1]||"浙江省宁波市",this.getAddressSearchFromGaode(null,a,"",!0));case 1:case"end":return s.stop()}}),null,this)},handleSelect:function(e){e.location;this.mapSelectForm.proAndCity=[e.province,e.city],this.mapSelectForm.area=[e.province,e.city],this.center=e.location,this.zoom=16},setMapDot:function(){var e=this;e.marker&&(e.marker.setMap(null),e.marker=null),e.marker=new AMap.Marker({position:e.mapSelectForm.position,icon:"//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png",offset:new AMap.Pixel(-13,-30),draggable:!1,cursor:"move"}),e.marker.setMap(e.map),e.map.setCenter(e.mapSelectForm.position),e.map.setZoom(15),e.marker.setAnimation("AMAP_ANIMATION_BOUNCE")},facatoryDelAddress:function(e){var t,r,a,s,n;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return t={id:e.company_id},o.next=3,regeneratorRuntime.awrap(FacatoryDelAddress(t));case 3:r=o.sent,a=r.data,s=a.code,n=a.msg,200==s?(this.$check.success.call(this,n),this.getFactoryAddressList()):this.$check.error.call(this,n);case 6:case"end":return o.stop()}}),null,this)},addressEdit:function(e){this.addressTmpEditData=e,this.addressAddMask=!0,this.addressHandleType=2,this.addressAddForm.autoFull="",this.addressAddForm.factory_name=e.company_name,this.addressAddForm.name=e.name,this.addressAddForm.phone=e.phone,this.addressAddForm.spare_phone=e.spare_phone,this.addressAddForm.email=e.email,this.addressAddForm.country=e.country,this.addressAddForm.province=e.province,this.addressAddForm.city=e.city,this.addressAddForm.area=e.province?[e.province,e.city]:[],this.addressAddForm.area_details=e.address,this.addressAddForm.setDefaultAddress=1==e.sign},addFacatoryAddress:function(){var e,t,r,a,s,n,o,i,l,c,d,p,m,h,f,y,g;return regeneratorRuntime.async((function(b){while(1)switch(b.prev=b.next){case 0:if(this.ruleForm.myInfo.email!=this.addressAddForm.email){b.next=3;break}return this.$check.error.call(this,"工厂邮箱不能和用户邮箱相同"),b.abrupt("return");case 3:if(e=this.addressAddForm,t=e.name,r=e.phone,a=e.factory_name,s=e.spare_phone,n=e.email,o=e.country,i=e.province,l=e.city,c=e.area,d=e.area_details,p=e.setDefaultAddress,!s||!this.$check.isTel(s)){b.next=7;break}return this.$check.error.call(this,"备用电话格式不正确!"),b.abrupt("return");case 7:if(m={company_name:a,name:t,phone:r,spare_phone:s,email:n,country:o,province:c?c[0]:i,city:c?c[1]:l,address:d,sign:p?1:0},2==this.addressHandleType&&(m.id=this.addressTmpEditData.company_id),1!=this.addressHandleType){b.next=15;break}return b.next=12,regeneratorRuntime.awrap(Object(u["b"])(m));case 12:b.t0=b.sent,b.next=18;break;case 15:return b.next=17,regeneratorRuntime.awrap(addFacatoryEditress(m));case 17:b.t0=b.sent;case 18:h=b.t0,f=h.data,y=f.code,g=f.msg,200==y?(this.addressAddMask=!1,this.$check.success.call(this,g),this.clearAddressAddForm(),this.factorysAddressIdx=1,this.getFactoryAddressList(),this.addressAddForm.autoFull=""):this.$check.error.call(this,g);case 21:case"end":return b.stop()}}),null,this)},clearAddressAddForm:function(){this.addressAddForm.name="",this.addressAddForm.phone="",this.addressAddForm.factory_name="",this.addressAddForm.spare_phone="",this.addressAddForm.email="",this.addressAddForm.area=[],this.addressAddForm.country="中国",this.addressAddForm.province="",this.addressAddForm.city="",this.addressAddForm.area_details="",this.addressAddForm.setDefaultAddress=!1},getFactoryAddressList:function(){var e,t,r,a,s,n,o;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=m({page_size:this.pageNumber,page:this.factorysAddressIdx},this.filters,{user_id:this.$route.query.user_id}),i.next=3,regeneratorRuntime.awrap(Object(u["n"])(e));case 3:t=i.sent,r=t.data,a=r.code,s=r.data,n=s.data,o=s.total,200==a&&(n.forEach((function(e){e["check"]=!1})),this.addressSelectList=n,this.addressSelectTotal=o);case 6:case"end":return i.stop()}}),null,this)},getAddressList:function(){var e,t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(u["k"])());case 2:e=s.sent,t=e.data,r=t.code,a=t.data,200==r&&(this.addressList=a);case 5:case"end":return s.stop()}}),null,this)},addressAddFormAutoFullForm:function(){var e,t,r,a,s,n,o,i;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:e=[],this.addressAddForm.autoFull=this.addressAddForm.autoFull.replace(/，/g,","),e=this.addressAddForm.autoFull.includes(",")?this.addressAddForm.autoFull.split(","):this.addressAddForm.autoFull.split("，"),e=e.map((function(e){return-1!=e.indexOf(":")?e.split(":")[e.split(":").length-1]:-1!=e.indexOf("：")?e.split("：")[e.split("：").length-1]:e})),t=/^\w+@\w+(\.\w+)+$/,r=0;case 6:if(!(r<e.length)){l.next=14;break}if(!t.test(e[r])){l.next=11;break}return this.addressAddForm.email=e[r],e.splice(r,1),l.abrupt("break",14);case 11:r++,l.next=6;break;case 14:a=/^1[3456789]\d{9}$/,s=0;case 16:if(!(s<e.length)){l.next=24;break}if(!a.test(e[s])){l.next=21;break}return this.addressAddForm.phone=e[s],e.splice(s,1),l.abrupt("break",24);case 21:s++,l.next=16;break;case 24:n=/^[((\+\d+)*)(\d+\-)*]*\s*\d+$/,o=0;case 26:if(!(o<e.length)){l.next=34;break}if(!n.test(e[o])){l.next=31;break}return this.addressAddForm.spare_phone=e[o],e.splice(o,1),l.abrupt("break",34);case 31:o++,l.next=26;break;case 34:return this.addressAddForm.factory_name=e[0],this.addressAddForm.name=e[2],i=e[1],l.next=39,regeneratorRuntime.awrap(this.getAddressSearchFromGaode(null,i,"",!0));case 39:this.addressAddForm=m({},this.addressAddForm);case 40:case"end":return l.stop()}}),null,this)},getPerpleInfo:function(){var e,t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(u["p"])({user_id:this.$route.query.user_id}));case 2:e=s.sent,t=e.data,r=t.code,a=t.data,200==r&&0!=Object.keys(a).length&&(this.ruleForm.myInfo=a);case 5:case"end":return s.stop()}}),null,this)},adressChange:function(e){var t=this.provinceAndCity.join(""),r=d()("#box").children();r.eq(this.targetIdx).text(t+e)},adress_other_Change:function(e){var t=d()("#box").children();t.eq(this.targetIdx).text(e)},adress_userInfo_Change:function(e){if(!(d()("#userInfo").children().length<=1)){var t=d()("#userInfo").children();t.eq(this.targetIdx_userInfo).text(e)}},adress_product_Change:function(e){var t=d()("#product").children();t.eq(this.targetIdx_userInfo).text(e)},factorysDB:function(e,t){for(var r=d()("#box").children(),a=0;a<r.length;a++){var s=r.eq(a).text();s.indexOf(e)>-1&&(this.targetIdx=a)}if(this.Input_factory.length){var n=e;for(r=d()("#box").children(),a=0;a<r.length;a++){var o=r.eq(a).text();o.indexOf(n)>-1&&(this.targetIdx=a)}this.targetIdx+1>=r.length?this.checkfactory(0,t):this.checkfactory(this.targetIdx+1,t)}},userInfoDB:function(e,t){if(this.Input_userinfo.length){for(var r=e,a=d()("#userInfo").children(),s=0;s<a.length;s++){var n=a.eq(s).text();n.indexOf(r)>-1&&(this.targetIdx_userInfo=s)}this.targetIdx_userInfo+1>=a.length?this.checkuserInfo(0,t):this.checkuserInfo(this.targetIdx_userInfo+1,t),this.ruleForm.myInfo=m({},this.ruleForm.myInfo)}},factoryclick:function(e,t){var r=/^\w+@\w+(\.\w+)+$/,a=/\d{8,}/,s=/.+?(省|市|自治区|自治州|县|区)/g;if("phone"==e||"spare_phone"==e){var n=/\d{8,}/;n.test(t)&&!r.test(t)&&(this.ruleForm.factorys[e]=t)}else if("email"==e)!a.test(t)&&r.test(t)&&(this.ruleForm.factorys[e]=t);else if("address"==e){if(!t)return;r.test(t)||a.test(t)||!s.test(t)||this.getAddressSearchFromGaode(null,t,"",!0,!0)}else r.test(t)||a.test(t)||("name"===e&&this.isdisabled.name&&(this.ruleForm.factorys[e]=t),"company_name"===e&&this.isdisabled.company_name_isdisabled&&(this.ruleForm.factorys[e]=t))},userInfoclick:function(e,t){var r=/^\w+@\w+(\.\w+)+$/,a=/\d{8,}/;if("phone"==e||"spare_phone"==e){var s=/\d{8,}/;s.test(t)&&!r.test(t)&&(this.ruleForm.myInfo[e]=t)}else"email"==e?!a.test(t)&&r.test(t)&&(this.ruleForm.myInfo[e]=t):r.test(t)||a.test(t)||("name"===e&&this.My_isdisabled.name_isdisabled&&(this.ruleForm.myInfo[e]=t),"company_name"===e&&this.My_isdisabled.company_name_isdisabled&&(this.ruleForm.myInfo[e]=t))},checkfactory:function(e,t){var r=/^\w+@\w+(\.\w+)+$/,a=/\d{8,}/,s=/.+?(省|市|自治区|自治州|县|区)/g,n=d()("#box").children();if("phone"==t||"spare_phone"==t){var o=n.eq(e).text(),i=/\d{8,}/;i.test(o)&&!r.test(o)?(this.ruleForm.factorys[t]=n.eq(e).text(),n.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"})):e+1>=n.length?this.checkfactory(0,t):this.checkfactory(e+1,t)}else if("email"==t){var l=n.eq(e).text(),c="";c=-1!=l.indexOf(":")?l.split(":")[l.split(":").length-1]:-1!=l.indexOf("：")?l.split("：")[l.split("：").length-1]:l,!a.test(c)&&r.test(c)?(this.ruleForm.factorys[t]=c,n.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"})):e+1>=n.length?this.checkfactory(0,t):this.checkfactory(e+1,t)}else if("address"==t){var u=p,p="";if(p=-1!=u.indexOf(":")?u.split(":")[u.split(":").length-1]:-1!=u.indexOf("：")?u.split("：")[u.split("：").length-1]:u,!p)return;a.test(p)||r.test(p)||!s.test(p)?e+1>=n.length?this.checkfactory(0,t):this.checkfactory(e+1,t):(this.ruleForm.factorys[t]=p,n.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"}))}else{var m=n.eq(e).text(),h="";if(h=-1!=m.indexOf(":")?m.split(":")[m.split(":").length-1]:-1!=m.indexOf("：")?m.split("：")[m.split("：").length-1]:m,a.test(h)||r.test(h))if(e+1>=n.length)this.checkfactory(0,t);else{var f=e+1;this.checkfactory(f,t)}else this.ruleForm.factorys[t]=h,n.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"})}},checkuserInfo:function(e,t){var r=/^\w+@\w+(\.\w+)+$/,a=/\d{8,}/,s=d()("#userInfo").children();if("phone"==t||"spare_phone"==t){var n=s.eq(e).text(),o="";o=-1!=n.indexOf(":")?n.split(":")[n.split(":").length-1]:-1!=n.indexOf("：")?n.split("：")[n.split("：").length-1]:n;var i=/\d{8,}/;i.test(o)&&!r.test(o)?(this.ruleForm.myInfo[t]=o,s.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"})):e+1>=s.length?this.checkuserInfo(0,t):this.checkuserInfo(e+1,t)}else if("email"==t){var l=s.eq(e).text();o="";o=-1!=l.indexOf(":")?l.split(":")[l.split(":").length-1]:-1!=l.indexOf("：")?l.split("：")[l.split("：").length-1]:l,!a.test(o)&&r.test(o)?(this.ruleForm.myInfo[t]=o,s.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"})):e+1>=s.length?this.checkuserInfo(0,t):this.checkuserInfo(e+1,t)}else{var c=s.eq(e).text();o="";o=-1!=c.indexOf(":")?c.split(":")[c.split(":").length-1]:-1!=c.indexOf("：")?c.split("：")[c.split("：").length-1]:c,r.test(o)||a.test(o)?e+1>=s.length?this.checkuserInfo(0,t):this.checkuserInfo(e+1,t):(this.ruleForm.myInfo[t]=o,s.eq(e).css({color:"#fa7202"}).siblings().css({color:"#333"}))}},productDB:function(e,t,r){if(this.Input_product.length){for(var a=t,s=d()("#product").children(),n=0;n<s.length;n++){var o=s.eq(n).text();o.indexOf(a)>-1&&(this.targetIdx_product=n)}this.targetIdx_product+1>=s.length?(this.ruleForm.productInfo[e][r]=s.eq(0).text(),s.eq(0).css({color:"#fa7202"}).siblings().css({color:"#333"})):(this.ruleForm.productInfo[e][r]=s.eq(this.targetIdx_product+1).text(),s.eq(this.targetIdx_product+1).css({color:"#fa7202"}).siblings().css({color:"#333"}))}},productDB_child:function(e,t,r,a){if(this.Input_product.length){for(var s=r,n=d()("#product").children(),o=0;o<n.length;o++){var i=n.eq(o).text();i.indexOf(s)>-1&&(this.targetIdx_product=o)}0==r&&(this.targetIdx_product=0),this.targetIdx_product+1>=n.length?(this.ruleForm.productInfo[e]["models"][t][a]=n.eq(0).text(),n.eq(0).css({color:"#fa7202"}).siblings().css({color:"#333"})):(this.ruleForm.productInfo[e]["models"][t][a]=n.eq(this.targetIdx_product+1).text(),n.eq(this.targetIdx_product+1).css({color:"#fa7202"}).siblings().css({color:"#333"}))}},company_name_blur:function(e){e.target.value&&(this.isdisabled.company_name_isdisabled=!1),this.B_address(e)},name_blur:function(e){e.target.value&&(this.isdisabled.name_isdisabled=!1),this.B_address(e)},email_blur:function(e){e.target.value&&(this.isdisabled.email_isdisabled=!1),this.B_address(e)},phone_blur:function(e){e.target.value&&(this.isdisabled.phone_isdisabled=!1),this.B_address(e)},B_address:function(e){for(var t=e.target.value,r=d()("#box").children(),a=0;a<r.length;a++){var s=r.eq(a).text();s.indexOf(t)>-1&&(this.targetIdx=a)}r.eq(this.targetIdx).css({color:"#333"})},myname_blur:function(e){e.target.value&&(this.My_isdisabled.name_isdisabled=!1),this.UB_address(e)},myemail_blur:function(e){e.target.value&&(this.My_isdisabled.email_isdisabled=!1),this.UB_address(e)},myphone_blur:function(e){e.target.value&&(this.My_isdisabled.phone_isdisabled=!1),this.UB_address(e)},my_company_name:function(e){e.target.value&&(this.My_isdisabled.company_name_isdisabled=!1),this.UB_address(e)},UB_address:function(e){for(var t=e.target.value,r=d()("#userInfo").children(),a=0;a<r.length;a++){var s=r.eq(a).text();s.indexOf(t)>-1&&(this.targetIdx_userInfo=a)}r.eq(this.targetIdx_userInfo).css({color:"#333"})},PB_address:function(e){for(var t=e.target.value,r=d()("#product").children(),a=0;a<r.length;a++){var s=r.eq(a).text();s.indexOf(t)>-1&&(this.targetIdx_product=a)}r.eq(this.targetIdx_product).css({color:"#333"})},F_address_city:function(e){for(var t=this.ruleForm.factorys.address,r=d()("#box").children(),a=0;a<r.length;a++){var s=r.eq(a).text();s.indexOf(t)>-1&&(this.targetIdx=a)}r.eq(this.targetIdx).css({color:"#fa7202"}).siblings().css({color:"#333"})},UF_address:function(e,t){for(var r=e,a=d()("#userInfo").children(),s=0;s<a.length;s++){var n=a.eq(s).text();n.indexOf(r)>-1&&(this.targetIdx_userInfo=s)}a.eq(this.targetIdx_userInfo).css({color:"#fa7202"}).siblings().css({color:"#333"})},PF_address:function(e,t,r){this.targetProductInput=r;for(var a=t,s=d()("#product").children(),n=0;n<s.length;n++){var o=s.eq(n).text();o.indexOf(a)>-1&&(this.targetIdx_product=n)}s.eq(this.targetIdx_product).css({color:"#fa7202"}).siblings().css({color:"#333"})},F_address:function(e,t){this.targetFactoryInput=t;for(var r=e,a=d()("#box").children(),s=0;s<a.length;s++){var n=a.eq(s).text();n.indexOf(r)>-1&&(this.targetIdx=s)}a.eq(this.targetIdx).css({color:"#fa7202"}).siblings().css({color:"#333"})},factoryFull:function(){var e,t,r,a,s,o,i,l,c,u,p,m,h,f,y,g,b,v,_,F,x,k=this;return regeneratorRuntime.async((function(w){while(1)switch(w.prev=w.next){case 0:for(this.is_factoryEdit=!0,e=d()("#box"),t=e.text(),r=t.split(/[,，]/),a=t.split(/[,，]/),s=[],","==r[r.length-1]||"，"==r[r.length-1]?(this.Input_factory=a.slice(0,a.length-1),s=a.slice(0,a.length-1)):(this.Input_factory=a,s=a),s=s.map((function(e){return-1!=e.indexOf(":")?e.split(":")[e.split(":").length-1]:-1!=e.indexOf("：")?e.split("：")[e.split("：").length-1]:e})),o=/^\w+@\w+(\.\w+)+$/,"","","",i=[],l=0;l<s.length;l++)o.test(s[l])&&i.push(s[l]);for(c=Object(n["a"])(this.filter_arr(s,i)),this.isdisabled.email_isdisabled&&(this.ruleForm.factorys.email=i[0]),u=[],p=/\d{8,}/,m=0;m<c.length;m++)p.test(c[m])?u.push(c[m]):(this.isdisabled.phone_isdisabled&&(this.ruleForm.factorys.phone=""),this.ruleForm.factorys.spare_phone="");0==u.length?this.ruleForm.factorys.phone="":u.length<2?this.isdisabled.phone_isdisabled&&(this.ruleForm.factorys.phone=u[0]):(this.isdisabled.phone_isdisabled&&(this.ruleForm.factorys.phone=u[0]),u.forEach((function(e,t){0!==t&&e!==k.ruleForm.factorys.phone&&(k.ruleForm.factorys.spare_phone=e)}))),h=Object(n["a"])(this.filter_arr(i,u)),f="",y=/.+?(省|市|自治区|自治州|县|区)/g,g=0;case 24:if(!(g<s.length)){w.next=31;break}if(!y.test(s[g])){w.next=28;break}return f=s[g],w.abrupt("break",31);case 28:g++,w.next=24;break;case 31:return Object(n["a"])(this.filter_arr(h,[f])),w.next=34,regeneratorRuntime.awrap(this.getAddressSearchFromGaode(null,f,"",!0,!0));case 34:for(b=[],v=0;v<s.length;v++)s[v].match(y)||p.test(s[v])||o.test(s[v])||b.push(s[v]);for(_=b[0],F=b[1],x=0;x<b.length;x++)b[x].length>=_.length&&(_=b[x]),b[x].length<=F.length&&(F=b[x]);this.isdisabled.company_name_isdisabled&&(this.ruleForm.factorys.company_name=_),this.isdisabled.name_isdisabled&&(this.ruleForm.factorys.name=F),this.factoryDialog=!1,0==this.Input_factory.length&&(this.ruleForm.factorys={});case 43:case"end":return w.stop()}}),null,this)},filter_arr:function(e,t){var r=new Set(Object(n["a"])(e)),a=new Set(Object(n["a"])(t)),s=new Set(Object(n["a"])(r).filter((function(e){return!a.has(e)})));return s},myInfoFull:function(){var e=this,t=d()("#userInfo").children();t.length<=1&&(this.ruleForm.myInfo={}),this.is_userInfoEdit=!0;var r=d()("#userInfo"),a=r.text(),s=a.split(/[,，]/),o=a.split(/[,，]/),i=[];","==s[s.length-1]||"，"==s[s.length-1]?(this.Input_userinfo=o.slice(0,o.length-1),i=o.slice(0,o.length-1)):(this.Input_userinfo=o,i=o),i=i.map((function(e){return-1!=e.indexOf(":")?e.split(":")[e.split(":").length-1]:-1!=e.indexOf("：")?e.split("：")[e.split("：").length-1]:e}));for(var l=/^\w+@\w+(\.\w+)+$/,c=[],u=0;u<i.length;u++)l.test(i[u])&&c.push(i[u]);var p=Object(n["a"])(this.filter_arr(i,c));this.My_isdisabled.email_isdisabled&&(this.ruleForm.myInfo.email=c[0]);for(var m=[],h=/\d{8,}/,f=0;f<p.length;f++)h.test(p[f])?(f,m.push(p[f])):(this.My_isdisabled.phone_isdisabled&&(this.ruleForm.myInfo.phone=""),this.ruleForm.myInfo.spare_phone="");0==m.length?this.ruleForm.myInfo.phone="":m.length<2?this.My_isdisabled.phone_isdisabled&&(this.ruleForm.myInfo.phone=m[0]):(this.My_isdisabled.phone_isdisabled&&(this.ruleForm.myInfo.phone=m[0]),m.forEach((function(t,r){0!==r&&t!==e.ruleForm.myInfo.phone&&(e.ruleForm.myInfo.spare_phone=t)})));Object(n["a"])(this.filter_arr(c,m));for(var y=[],g=0;g<i.length;g++)h.test(i[g])||l.test(i[g])||y.push(i[g]);for(var b=/^[a-zA-Z\u4E00-\u9FA5]+$/,v=[],_=0;_<y.length;_++)b.test(y[_])&&v.push(y[_]);for(var F=v[0],x=v[0],k=0;k<v.length;k++)v[k].length>=F.length&&(F=v[k]),v[k].length<=x.length&&(x=v[k]);this.My_isdisabled.company_name_isdisabled&&(this.ruleForm.myInfo.company_name=F),this.My_isdisabled.name_isdisabled&&(this.ruleForm.myInfo.name=x),this.myInfoDialog=!1},proInfoFull:function(){var e=this;this.ruleForm.productInfo=[];var t=[],r="";r=this.proInfoAutoFullForm.replace(/，|\s/g,","),t=r.includes(",")?r.split(","):r.split("，");for(var a=[],s=0;s<t.length;s+=4){for(var n=[],o=0;o<4;o++)n.push(t[s+o]);n=n.filter((function(e){return e})),a.push(n)}a.forEach((function(t,r){var a={po_num:t[0]||"",product_name:t[1]||"",models:[{mark:t[2]||"",amount:t[3]||"",unit:"个"}]};e.ruleForm.productInfo.splice(r,1,a)}))},saveSubmit:function(){this.$refs.upload.submit()},addProductTypeRow:function(e){this.ruleForm.productInfo[e].models.push({mark:"",amount:"",unit:"个"})},delProductTypeRow:function(e,t){1!=this.ruleForm.productInfo[e].models.length?this.ruleForm.productInfo[e].models.splice(t,1):this.ruleForm.productInfo[e].models.splice(0,1,{mark:"",amount:"",unit:"个"})},addProductAllRow:function(){this.ruleForm.productInfo.push({category_id:"",po_num:"",product_name:"",hidden:!1,models:[{mark:"",amount:"",unit:"个"}]})},delProductAllRow:function(e,t){1!=this.ruleForm.productInfo.length?this.ruleForm.productInfo.splice(t,1):this.ruleForm.productInfo.splice(0,1,{category_id:"",po_num:"",product_name:"",hidden:!1,models:[{mark:"",amount:"",unit:"个"}]})},submit:function(){var e,t,r,a,s,n,o,i,l,c,d,p,h,f,y,g,b,v,_,F,x,k,w,I;return regeneratorRuntime.async((function(S){while(1)switch(S.prev=S.next){case 0:if(""==this.ruleForm.factorys.email&&(this.ruleForm.factorys.email=this.ruleForm.factorys.phone+"@qq.com"),""==this.ruleForm.myInfo.email&&(this.ruleForm.myInfo.email=this.ruleForm.myInfo.phone+"@qq.com"),this.ruleForm.factorys.email!=this.ruleForm.myInfo.email){S.next=5;break}return this.$check.error.call(this,"工厂邮箱与用户邮箱不能相同！"),S.abrupt("return");case 5:if(e=this.ruleForm,t=e.date,r=e.type,a=e.factorys,s=a.name,n=a.email,o=a.phone,a.country,a.address,a.city,i=e.productInfo,l=e.sampleForm,l.sample,l.standard,l.critical,l.major,l.minor,l.remark,c=this.$check,!c.isEmpty(r)){S.next=11;break}return c.error.call(this,"验货类型不能为空!"),S.abrupt("return");case 11:if(!c.isEmpty(t)){S.next=14;break}return c.error.call(this,"验货时间不能为空!"),S.abrupt("return");case 14:if(!c.isEmpty(s)){S.next=17;break}return c.error.call(this,"工厂信息联系人不能为空!"),S.abrupt("return");case 17:if(!c.isEmail(n)){S.next=20;break}return c.error.call(this,"工厂信息邮箱格式不正确!"),S.abrupt("return");case 20:if(d=/^(\\+\\d{2}-)?0\\d{2,3}-\\d{7,8}$/,!c.isTel(o)||!d.test(o)){S.next=24;break}return c.error.call(this,"工厂信息手机号码格式不正确!"),S.abrupt("return");case 24:if(this.provinceAndCity[1]&&(this.ruleForm.factorys.province=this.provinceAndCity[0],this.ruleForm.factorys.city=this.provinceAndCity[1],this.ruleForm.factorys=m({},this.ruleForm.factorys)),this.ruleForm.factorys.city){S.next=28;break}return c.error.call(this,"工厂城市不能为空!"),S.abrupt("return");case 28:return p=this.ruleForm.factorys.address||this.ruleForm.factorys.city,S.next=31,regeneratorRuntime.awrap(this.getAddressSearchFromGaode(null,p,"",!0));case 31:if(e.myInfo.name){S.next=34;break}return c.error.call(this,"我的信息联系人不能为空!"),S.abrupt("return");case 34:if(!c.isEmail(e.myInfo.email)){S.next=37;break}return c.error.call(this,"我的信息邮箱格式不正确!"),S.abrupt("return");case 37:if(h=/^(\\+\\d{2}-)?0\\d{2,3}-\\d{7,8}$/,!c.isTel(e.myInfo.phone)||!h.test(e.myInfo.phone)){S.next=41;break}return c.error.call(this,"我的信息手机号码格式不正确!"),S.abrupt("return");case 41:if(f=0,y=0,i[0].category_id){S.next=46;break}i=[],S.next=63;break;case 46:g=i.length;case 47:if(!(f<g)){S.next=63;break}if(i[f].category_id&&i[f].po_num&&i[f].product_name){S.next=50;break}return S.abrupt("break",63);case 50:y=0,b=i[f].models.length;case 52:if(!(y<b)){S.next=58;break}if(i[f].models[y].mark&&i[f].models[y].amount&&i[f].models[y].unit){S.next=55;break}return S.abrupt("break",58);case 55:y++,S.next=52;break;case 58:if(y==i[f].models.length){S.next=60;break}return S.abrupt("break",63);case 60:f++,S.next=47;break;case 63:return t=new Date(t),v=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),2!=this.ruleForm.type&&4!=this.ruleForm.type&&5!=this.ruleForm.type||(delete this.ruleForm.sampleForm.standard,delete this.ruleForm.sampleForm.critical,delete this.ruleForm.sampleForm.major,delete this.ruleForm.sampleForm.minor),_=m({user_id:this.$route.query.user_id,country:this.ruleForm.factorys.country,province:this.ruleForm.factorys.province,city:this.ruleForm.factorys.city,insp_address:this.ruleForm.factorys.address,long_lat:this.props_long_lat,inspect_time:v,annexs:this.fileList.length?this.fileList.map((function(e){return{path:e}})):"",type:r},this.ruleForm.sampleForm,{factorys:this.ruleForm.factorys,users:m({},this.ruleForm.myInfo),products:this.ruleForm.productInfo.concat().map((function(e){return delete e.hidden,e})),is_draft:this.is_draft,insp_fee:this.YHMoney[this.yhFeeType[this.ruleForm.type-1]]}),this.$route.query.back||(_["order_id"]=this.$route.query.id,_["resubmit"]=this.$route.query.resubmit),this.saveIsLoad=!0,S.next=71,regeneratorRuntime.awrap(Object(u["D"])(_));case 71:F=S.sent,x=F.data,k=x.code,w=x.data,I=x.msg,200==k?(_["order_id"]&&!this.$route.query.back&&Object(u["e"])({orders_id:_["order_id"]}),c.success.call(this,I),this.saveIsLoad=!1,0==this.is_draft&&(Object(u["y"])({redis_reload:1}),Object(u["f"])({redis_reload:1}),Object(u["i"])({redis_reload:1}),setTimeout((function(){window.open("http://www.inspector.ltd/placeOrder/#/index/checkOrder?id="+w.order_id+"&handle=admin","_self")}),500))):(c.error.call(this,I),this.saveIsLoad=!1);case 74:case"end":return S.stop()}}),null,this)},clearFom:function(){for(var e in this.ruleForm.date="",this.ruleForm.type="",this.ruleForm.productInfo=[{po_id:"",product_name:"",hidden:!1,children:[{product_type:"",product_num:"",product_unit:""}]}],this.ruleForm.myInfo)this.ruleForm.myInfo[e]="";for(var t in this.ruleForm.factorys)this.ruleForm.factorys[t]="";for(var r in this.ruleForm.sampleForm)this.ruleForm.sampleForm[r]=""},getCountryList:function(){var e,t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(u["z"])());case 2:e=s.sent,t=e.data,r=t.code,a=t.data,200==r&&(this.countryList=a);case 5:case"end":return s.stop()}}),null,this)},getCityList:function(){var e,t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(u["A"])());case 2:e=s.sent,t=e.data,r=t.code,a=t.data,200==r&&(this.chinaCityList=a);case 5:case"end":return s.stop()}}),null,this)},getCategory:function(){var e,t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(u["l"])());case 2:e=s.sent,t=e.data,r=t.code,a=t.data,200==r&&(this.categoryList=a);case 5:case"end":return s.stop()}}),null,this)},checkFile:function(e){for(var t=this.$refs.upload.uploadFiles,r=0,a=!1,s=!1,n=["pdf","pptx","doc","docx","xls","xlsx","jpg","png","jpeg","zip","rar"];r<t.length;r++){var o=t[r].name.split(".")[t[r].name.split(".").length-1];if(!n.includes(o)){a=!0;break}if(t[r].size/1024/1024>=100){s=!0;break}}return a?(this.$check.error.call(this,"所选的文件列表中类型不支持!"),this.$refs.upload.abort(),!1):s?(this.$check.error.call(this,"所选的文件列表中大小不能超过100MB!"),this.$refs.upload.abort(),!1):void 0},handleRemove:function(e,t){var r=e.response.data.file_path;this.fileList=this.fileList.filter((function(e){return e!=r}))},uploadSuccess:function(e){var t=e.code,r=e.data.file_path;200==t&&this.fileList.push(r)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload:function(e){},handleEmail:function(){var e,t,r,a,s,n;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(e=!1,this.$refs["addEmail"].validate((function(t){t&&(e=!0)})),!e){o.next=9;break}return t=m({},this.emailFrom),o.next=6,regeneratorRuntime.awrap(Object(l["a"])(t));case 6:r=o.sent,a=r.data,s=a.code,a.data,n=a.msg,200==s&&(this.$message({type:"success",message:n}),this.dialogVisible=!1);case 9:case"end":return o.stop()}}),null,this)},getFullInfo:function(e){var t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(t="",!e){s.next=5;break}return s.next=4,regeneratorRuntime.awrap(Object(u["q"])({order_id:e}));case 4:t=s.sent;case 5:r=t.data,a=r.data,r.code,a&&(this.ruleForm.type=a.type,this.ruleForm.province=a.province,this.ruleForm.insp_address=a.insp_address,this.ruleForm.city=a.city,this.ruleForm.country=a.country,this.ruleForm.long_lat=[a.long,a.lat].join(","),this.ruleForm.productInfo=a.products,this.ruleForm.productInfo=this.ruleForm.productInfo.map((function(e){var t=e.category_id,r=e.po_num,a=e.product_name,s=e.models;return{category_id:t,po_num:r,product_name:a,models:s.map((function(e){var t=e.mark,r=e.amount,a=e.unit;return{mark:t,amount:r,unit:a}}))}})),a.usercompanys&&(this.ruleForm.myInfo=a.usercompanys),this.ruleForm.factorys=a.factorys,delete this.ruleForm.factorys.user_id,this.provinceAndCity=[this.ruleForm.factorys.province,this.ruleForm.factorys.city],this.ruleForm.sampleForm={sample:a.sample,standard:a.standard,critical:a.critical,major:a.major,minor:a.minor,remark:a.remark});case 7:case"end":return s.stop()}}),null,this)}},mounted:function(){this.kfglMask=this.mapSelectMask,this.$store.dispatch("global/fetchCountries"),this.$store.dispatch("global/fetchProvince"),this.ruleForm.type=Number(this.$route.query.selType)||1,this.$route.query.id&&this.getFullInfo(this.$route.query.id)},computed:m({},Object(i["b"])("global",["countries","provinces"]),{IsLanguage:function(){return localStorage.getItem("locale")},computedWeek:function(){return this.ruleForm.date?this.days[new Date(this.ruleForm.date).getDay()]:""},checkType:function(){var e=[{id:1,value:"抽检"},{id:2,value:"全检"},{id:3,value:"在线检验"},{id:4,value:"验厂"},{id:5,value:"监柜"},{id:6,value:"验货+监柜"}];return e},days:function(){var e={0:"星期天",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"};return e},editorOption:function(){},unitList:function(){var e=["个","只","双","套","打","卷","辆","头","袋","箱","包","码","米","千克","公吨","公升","加仑","其他"];return e}})},f=h,y=(r("21dc"),r("2877")),g=Object(y["a"])(f,a,s,!1,null,"26f41a8c",null);t["default"]=g.exports},f183:function(e,t,r){var a=r("d012"),s=r("861d"),n=r("5135"),o=r("9bf2").f,i=r("90e3"),l=r("bb2f"),c=i("meta"),d=0,u=Object.isExtensible||function(){return!0},p=function(e){o(e,c,{value:{objectID:"O"+ ++d,weakData:{}}})},m=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,c)){if(!u(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},h=function(e,t){if(!n(e,c)){if(!u(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},f=function(e){return l&&y.REQUIRED&&u(e)&&!n(e,c)&&p(e),e},y=e.exports={REQUIRED:!1,fastKey:m,getWeakData:h,onFreeze:f};a[c]=!0}}]);