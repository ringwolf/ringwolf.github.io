(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-492c57cd"],{"36e1":function(t,e,i){"use strict";var a=i("badb"),n=i.n(a);n.a},"9d65":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-container"},[i("div",{attrs:{id:"localMap"}})])}],s=(i("f3dd"),i("0a51"),i("fe59"),i("2eeb"),i("08ba"),i("e18c"),{init:function(){var t="en-US",e="dr8V8Z9ZLyHJd7MdLFLi~M4pmdQsZNqV1ehtUtx7ajA~Au2D5HXjglKGbUyOIJG8mj2cLubIJlsBcADpL6iCkchRzbN5jjlKtW8a58cuVAI9",i=(Date.parse(new Date),"http://www.bing.com/api/maps/mapcontrol?callback=GetMap&setLang="+t+"&key="+e);return new Promise((function(t,e){if("undefined"!==typeof Microsoft)return t(Microsoft),!0;var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",i),document.body.appendChild(a);var n=0,s=setInterval((function(){n>=20&&(e(),clearInterval(s),console.error("bing地图脚本初始化失败...")),"undefined"!==typeof Microsoft&&(t(Microsoft),clearInterval(s)),n+=1}),500)}))}}),o={props:{inspectors:Array,orderLon:String,orderLat:String,keywords:String},data:function(){return{lngNum:null,latNum:null,map:null,infobox:"",searchManager:""}},created:function(){var t=this;s.init().then((function(e){setTimeout((function(){t.initMap()}),1e3)}))},methods:{Search:function(){var t=this;if(this.searchManager){this.map.entities.clear();var e=this.keywords;this.geocodeQuery(e)}else Microsoft.Maps.loadModule("Microsoft.Maps.Search",(function(){t.searchManager=new Microsoft.Maps.Search.SearchManager(t.map),t.Search()}))},geocodeQuery:function(t){var e=this,i={where:t,callback:function(t){if(t&&t.results&&t.results.length>0){for(var i,a,n=[],s=[],o=0;o<1;o++)i=new Microsoft.Maps.Pushpin(t.results[o].location,{color:"red"}),n.push(i),s.push(t.results[o].location);e.map.entities.push(n),a=1==t.results.length?t.results[0].bestView:Microsoft.Maps.LocationRect.fromLocations(s),e.map.setView({bounds:a})}},errorCallback:function(t){}};this.searchManager.geocode(i)},setPin:function(){var t=this,e=this,i={latitude:this.orderLat,longitude:this.orderLon};this.infobox=new Microsoft.Maps.Infobox(e.map.getCenter(),{visible:!1}),this.infobox.setMap(this.map);var a=new Microsoft.Maps.Pushpin(i,{title:"",subTitle:"",text:"",color:"red"});this.map.entities.push(a),this.inspectors.forEach((function(e){var i={latitude:e.users.lat,longitude:e.users.lon},a=new Microsoft.Maps.Pushpin(i,{color:"green"});a.metadata={title:e.users.nick,description:"电话"+e.users.phone},Microsoft.Maps.Events.addHandler(a,"click",t.pushpinClicked),t.map.entities.push(a)}))},pushpinClicked:function(t){t.target.metadata&&this.infobox.setOptions({location:t.target.getLocation(),title:t.target.metadata.title,description:t.target.metadata.description,visible:!0})},initMap:function(){var t=this;this.map=new Microsoft.Maps.Map("#localMap",{credentials:"AgzeobkGvmpdZTFuGa7_6gkaHH7CXHKsFiTQlBvi55x-QLZLh1rSjhd1Da9bfPhD"}),Microsoft.Maps.Events.addHandler(t.map,"click",t.getClickLocation),this.keywords&&this.Search(),this.orderLon&&this.setPin()},getClickLocation:function(t){var e=this,i=null;if("pushpin"==t.targetType)i=t.target.getLocation();else{var a=new Microsoft.Maps.Point(t.pageX,t.pageY);i=t.target.tryPixelToLocation(a,Microsoft.Maps.PixelReference.page)}e.lngNum=i.longitude,e.latNum=i.latitude;var n={lngNum:e.lngNum,latNum:e.latNum};this.$emit("getLocationNums",n)}}},r=o,c=(i("36e1"),i("9ca4")),l=Object(c["a"])(r,a,n,!1,null,"4923e15a",null);e["default"]=l.exports},badb:function(t,e,i){}}]);