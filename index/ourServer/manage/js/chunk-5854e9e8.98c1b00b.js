(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5854e9e8"],{"1a63":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"orderDetail",staticStyle:{height:"100%"}},[r("div",{staticClass:"order-head"},[r("div",{staticClass:"logo m-r-80 pull-left",staticStyle:{"margin-left":"20px","margin-top":"-15px"}},[r("img",{staticClass:"w-200",attrs:{src:a("9d64"),alt:""},on:{click:function(t){return e.openWeb()}}})]),r("span",{staticStyle:{"margin-left":"-100px"}},[e._v("订单详情")])]),r("div",{staticClass:"order-basicInfo"},["insp"==this.$route.query.type?r("div",{staticClass:"fs-20",staticStyle:{margin:"20px 0"}},[e._v(" 尊敬的"+e._s(e.inspectors)+"，您收到一个验货任务，请确认 "),r("el-button",{staticStyle:{"border-radius":"5px","margin-left":"15px"},attrs:{type:"success"},on:{click:function(t){return e.seeOrder(1)}}},[e._v("确 认")]),r("el-button",{staticStyle:{"border-radius":"5px"},attrs:{type:"danger"},on:{click:function(t){return e.seeOrder(2)}}},[e._v("拒 绝")])],1):e._e(),r("div",[r("el-row",[r("el-col",{attrs:{span:5}},[r("span",{staticStyle:{display:"inline-block","margin-right":"30px"}},[e._v("订单号："+e._s(e.orderData.orders_num))])]),r("el-col",{attrs:{span:4}},[r("span",[e._v("付款时间："+e._s(e.orderData.pay_time))])]),r("el-col",{attrs:{span:4}},[r("span",[e._v("验货费用："+e._s(e.orderData.price))])]),r("el-col",{attrs:{span:4}},["factory"==this.$route.query.type?r("p",{staticClass:"text-yellow pull-right"},[e._v("请精确工厂地址，方便验货员验货")]):e._e()])],1)],1),r("div",{staticClass:"order-basic"},[r("el-row",[r("el-col",{attrs:{span:5}},[r("span",[e._v("委托方："+e._s(e.orderData.users.nick||e.orderData.users.name))])]),r("el-col",{attrs:{span:4}},[r("span",[e._v("验货类型："+e._s(e.typeObj[e.orderData.type]))])]),r("el-col",{attrs:{span:4}},[r("span",[e._v("验货时间："+e._s(e.orderData.inspect_time))])]),r("el-col",{attrs:{span:4}},[r("span",[e._v("验货时长（天数）："+e._s(e.orderData.insp_day)+"天")])]),r("el-col",{attrs:{span:3}},[r("span",[e._v("验货人数："+e._s(e.orderData.insp_number)+"人")])]),r("el-col",{attrs:{span:3}},[r("span",[e._v("验货员："+e._s(e.inspectors))])])],1)],1)]),e.orderAliasMask?r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"订单退回",visible:e.orderAliasMask,width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.orderAliasMask=t}}},[r("p",[e._v("您确定要退回订单吗？")]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleBack}},[e._v("确 定")]),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.orderAliasMask=!1}}},[e._v("取 消")])],1)]):e._e(),r("div",{staticClass:"order-main"},[r("el-row",{staticStyle:{width:"100%",height:"100%",margin:"0"},attrs:{gutter:20}},[r("el-col",{staticClass:"yanhuo-left",staticStyle:{height:"100%",overflow:"auto"},attrs:{span:12}},[r("div",{staticClass:"grid-content bg-purple"},[r("div",[r("ul",{staticClass:"title-type"},e._l(e.orderType,(function(t,a){return r("li",{key:a,class:e.orderIndex==a?"active":"",on:{click:function(t){e.orderIndex=a,e.getInfo(a)}}},[e._v(e._s(t.name))])})),0),0==e.orderIndex?r("div",{staticClass:"basic-main"},[r("div",{staticClass:"basic-info"},[r("div",{staticClass:"basic-info-head"},[r("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("工厂信息")]),"factory"==this.$route.query.type?r("span",{staticStyle:{color:"#02A7F0","font-size":"14px",float:"right",cursor:"pointer"},on:{click:function(t){e.addressAddMask=!0,e.addressAddForm.autoFull=""}}},[e._v("变更")]):e._e()]),r("div",{staticClass:"basic-info-body shao-table"},[r("p",[r("span",[e._v("工厂名称：")]),r("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.company_name:"暂无数据"))])]),r("p",[r("span",[e._v("联系人：")]),r("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.name:"暂无数据"))])]),r("p",[r("span",[e._v("联系电话：")]),r("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.phone:"暂无数据"))])]),r("p",[r("span",[e._v("邮 箱：")]),r("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.email:"暂无数据"))])]),r("p",[r("span",[e._v("工厂地址：")]),r("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.country+e.orderData.factorys.city+e.orderData.factorys.address:"暂无数据"))])]),r("p",{staticStyle:{flex:"0 0 50%"}},[r("span",[e._v("备用电话")]),r("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.spare_phone:"暂无数据"))])])])]),r("div",{staticClass:"basic-info"},[r("div",{staticClass:"basic-info-head"},[r("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("产品信息")])]),r("div",{staticClass:"basic-info-body"},e._l(e.orderData.products,(function(t,a){return r("div",{key:a,staticClass:"m-t-10"},[r("i",{class:t.hidden?"el-icon-caret-right":"el-icon-caret-bottom",staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(e){t.hidden=!t.hidden}}}),r("div",{staticClass:"fs-12 d-inline-block"},[r("span",[e._v("产品分类")]),r("el-cascader",{staticClass:"wd150",attrs:{clearable:"",props:e.props,options:e.categoryList},model:{value:t.category_id,callback:function(a){e.$set(t,"category_id",a)},expression:"item.category_id"}})],1),r("div",{staticClass:"fs-12 d-inline-block"},[r("span",[e._v("P.O号")]),r("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入P.O号"},model:{value:t.po_num,callback:function(a){e.$set(t,"po_num",a)},expression:"item.po_num"}})],1),r("div",{staticClass:"fs-12 d-inline-block"},[r("span",[e._v("产品名称")]),r("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品名称"},model:{value:t.product_name,callback:function(a){e.$set(t,"product_name",a)},expression:"item.product_name"}})],1),e._l(t.models,(function(a,s){return r("div",{key:s,class:["bg-grey","product-children",t.hidden?"hidden":""],staticStyle:{"margin-top":"10px"}},[r("div",{staticClass:"mtb10 addStart d-inline-block",attrs:{prop:"product_type"}},[r("span",[e._v("产品型号")]),r("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品型号"},model:{value:a.mark,callback:function(t){e.$set(a,"mark",t)},expression:"item2.mark"}})],1),r("div",{staticClass:"mtb10 addStart d-inline-block"},[r("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",type:"number",min:"1",placeholder:"请输入数量"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"item2.amount"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append",clearable:"",placeholder:"请选择"},slot:"append",model:{value:a.unit,callback:function(t){e.$set(a,"unit",t)},expression:"item2.unit"}},e._l(e.unitList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)])}))],2)})),0),e.productdialogVisible?r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"产品信息更改",visible:e.productdialogVisible,width:"50%"},on:{"update:visible":function(t){e.productdialogVisible=t}}},[e._l(e.productData,(function(t,a){return r("div",{key:a,staticClass:"m-t-10"},[r("i",{class:t.hidden?"el-icon-caret-right":"el-icon-caret-bottom",staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(e){t.hidden=!t.hidden}}}),r("div",{staticClass:"fs-12 d-inline-block"},[r("span",[e._v("产品分类")]),r("el-cascader",{staticClass:"wd150",attrs:{clearable:"",props:e.props,options:e.categoryList},model:{value:t.category_id,callback:function(a){e.$set(t,"category_id",a)},expression:"item.category_id"}})],1),r("div",{staticClass:"fs-12 d-inline-block"},[r("span",[e._v("P.O号")]),r("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入P.O号"},model:{value:t.po_num,callback:function(a){e.$set(t,"po_num",a)},expression:"item.po_num"}})],1),r("div",{staticClass:"fs-12 d-inline-block"},[r("span",[e._v("产品名称")]),r("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品名称"},model:{value:t.product_name,callback:function(a){e.$set(t,"product_name",a)},expression:"item.product_name"}})],1),e._l(t.models,(function(a,s){return r("div",{key:s,class:["bg-grey","product-children",t.hidden?"hidden":""],staticStyle:{"margin-top":"20px"}},[r("div",{staticClass:"mtb10 addStart d-inline-block",attrs:{prop:"product_type"}},[r("span",[e._v("产品型号")]),r("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品型号"},model:{value:a.mark,callback:function(t){e.$set(a,"mark",t)},expression:"item2.mark"}})],1),r("div",{staticClass:"mtb10 addStart d-inline-block"},[r("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",type:"number",min:"1",placeholder:"请输入数量"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"item2.amount"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append",clearable:"",placeholder:"请选择"},slot:"append",model:{value:a.unit,callback:function(t){e.$set(a,"unit",t)},expression:"item2.unit"}},e._l(e.unitList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)])}))],2)})),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.productdialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editProduct()}}},[e._v("确 定")])],1)],2):e._e()],1),r("div",{staticClass:"basic-info"},[r("div",{staticClass:"basic-info-head"},[r("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("附件信息")]),r("span",{staticStyle:{color:"#02A7F0","font-size":"14px",float:"right",cursor:"pointer"},on:{click:function(t){return e.oneDown(e.orderData.annexs)}}},[e._v("一键下载")])]),r("div",{staticClass:"basic-info-body"},e._l(e.orderData.annexs,(function(t,a){return r("p",{key:a},[e._v(" 附 件 "+e._s(a+1)+"： "),r("span",{on:{click:function(a){return e.enclosureDown(t.path)}}},[e._v(e._s(t.path))]),r("el-upload",{ref:"upload",refInFor:!0,staticClass:"pull-right",attrs:{action:e.$host.file+"/api/a_u/upload_file","show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-success":e.uploadSuccess,"on-remove":e.handleRemove,"before-upload":e.checkFile}})],1)})),0)]),r("div",{staticClass:"basic-info"},[r("div",{staticClass:"basic-info-head"},[r("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("样品及注意事项")])]),r("div",{staticClass:"basic-info-body shao-table"},[r("p",{staticStyle:{flex:"0 0 100%"}},[r("span",[e._v("提供样品：")]),r("span",[e._v(e._s(1==e.orderData.sample?"未提供样品":2==e.orderData.sample?"送往或已在工厂":3==e.orderData.sample?"送往验货在线":""))])]),2!=e.orderData.type&&4!=e.orderData.type&&5!=e.orderData.type?r("div",{staticClass:"shao-table",staticStyle:{width:"100%"}},[r("p",[r("span",[e._v("抽样标准：")]),r("span",[e._v(e._s(e.orderData.standard?e.orderData.standard:"未填写"))])]),r("p",[r("span",[e._v("AQL：")]),r("span",[e._v(e._s(e.orderData.critical?e.orderData.critical:"未填写"))])]),r("p",{staticStyle:{flex:"0 0 50%"}},[r("span",[e._v("Major：")]),r("span",[e._v(e._s(e.orderData.major?e.orderData.major:"未填写"))])]),r("p",{staticStyle:{flex:"0 0 50%"}},[r("span",[e._v("Minor：")]),r("span",[e._v(e._s(e.orderData.minor?e.orderData.minor:"未填写"))])])]):e._e(),r("p",{staticStyle:{flex:"0 0 100%"}},[r("span",[e._v("注意事项：")]),e.orderData.remark?r("span",{domProps:{innerHTML:e._s(e.orderData.remark)}}):r("span",[e._v("未填写")])])]),e.tipdialogVisible?r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"注意事项更改",visible:e.tipdialogVisible,width:"50%"},on:{"update:visible":function(t){e.tipdialogVisible=t}}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{staticClass:"addStart",attrs:{label:"提供样品",prop:"sample"}},[r("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.sample,callback:function(t){e.$set(e.tipData,"sample",t)},expression:"tipData.sample"}},[r("el-option",{attrs:{label:"未提供样品",value:1}}),r("el-option",{attrs:{label:"送往或已在工厂",value:2}}),r("el-option",{attrs:{label:"送往验货在线",value:3}})],1)],1),r("br"),2!=e.orderData.type&&4!=e.orderData.type&&5!=e.orderData.type?r("div",[r("el-form-item",{staticClass:"addStart",attrs:{label:"抽样标准",prop:"standard"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.standard,callback:function(t){e.$set(e.tipData,"standard",t)},expression:"tipData.standard"}},e._l(e.samplingList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"addStart",attrs:{label:"AQL CRITICAL",prop:"critical"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.critical,callback:function(t){e.$set(e.tipData,"critical",t)},expression:"tipData.critical"}},e._l(e.AQLList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"addStart",attrs:{label:"MAJOR",prop:"major"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.major,callback:function(t){e.$set(e.tipData,"major",t)},expression:"tipData.major"}},e._l(e.MajorList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{staticClass:"addStart",attrs:{label:"MINOR",prop:"minor"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.minor,callback:function(t){e.$set(e.tipData,"minor",t)},expression:"tipData.minor"}},e._l(e.MinorList,(function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1):e._e(),r("br"),r("el-form-item",{staticClass:"addStart",staticStyle:{width:"100%",height:"200px"},attrs:{label:"注意事项",id:"zysx",prop:"remark"}},[r("el-input",{attrs:{clearable:"",type:"textarea"},model:{value:e.tipData.remark,callback:function(t){e.$set(e.tipData,"remark",t)},expression:"tipData.remark"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.tipdialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSample()}}},[e._v("确 定")])],1)],1):e._e()],1)]):r("div",{staticClass:"other-tab"},[1==e.orderIndex?r("div",[r("ul",{staticClass:"message-list historyUl"},e._l(e.messageList,(function(t,a){return r("li",{key:a,staticClass:"clearfixed"},[r("div",{staticClass:"pull-left",staticStyle:{"border-right":"1px solid #eee","padding-right":"10px",width:"30px"}},[e._v(e._s(a+1))]),r("div",{staticClass:"text-yellow pull-left m-l-20",staticStyle:{"border-right":"1px solid #eee","padding-right":"10px"}},[e._v(e._s(t.create_at))]),r("div",{staticClass:"pull-left m-l-20 text-grey",staticStyle:{"padding-left":"10px"}},[e._v(e._s(t.content))])])})),0)]):e._e(),2==e.orderIndex?r("div",[e.messageList.length?r("ul",{staticClass:"message-list commentUl"},e._l(e.messageList,(function(t,s){return r("li",{key:s,staticClass:"comment-first",staticStyle:{margin:"10px 0"}},[r("div",{staticStyle:{float:"left","max-width":"70%"}},[e._v(" "+e._s(e.sceneObj[t.scene])+"说："+e._s(t.content)+" "),r("div",{staticClass:"create_at"},[e._v(e._s(t.create_at))]),r("div",[r("ul",e._l(t.child,(function(t,a){return r("li",{key:a,staticStyle:{"margin-top":"20px"}},[e._v(" "+e._s(e.replyScene[t.reply_scene])+"回复："+e._s(t.content)+" "),r("div",{staticClass:"create_at"},[e._v(e._s(t.create_at))])])})),0)])]),r("div",{staticClass:"text-grey",staticStyle:{float:"right"}},e._l(t.score,(function(e,t){return r("img",{key:t,attrs:{src:a("5e13")}})})),0)])})),0):r("p",{staticStyle:{color:"#333","text-align":"center","margin-top":"150px"}},[e._v("暂无评价")])]):e._e(),3==e.orderIndex?r("div",[r("ul",{staticClass:"message-list"},e._l(e.messageList,(function(t,a){return r("li",{key:a,staticStyle:{margin:"10px 0"}},[e._v(" "+e._s(e.sceneObj[t.scene])+"说："+e._s(t.content)+" "),r("div",{staticClass:"text-grey",staticStyle:{float:"right"}},[e._v(e._s(t.score)+"星")]),r("div",[r("ul",e._l(t.child,(function(t,a){return r("li",{key:a,staticStyle:{margin:"10px"}},[e._v(e._s(e.replyScene[t.reply_scene])+"回复："+e._s(t.content))])})),0)])])})),0)]):e._e()])])])]),r("el-col",{staticStyle:{height:"100%",padding:"0"},attrs:{span:12}},[r("div",{staticStyle:{width:"100%",height:"100%"}},[r("baidu-map",{staticClass:"amap-box",staticStyle:{height:"100%"},attrs:{zoom:15,center:e.center,dragging:!0,"scroll-wheel-zoom":!0}},[r("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),r("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP","BMAP_SATELLITE_MAP"],anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),r("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),r("bm-overview-map",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",isOpen:!0}}),e._l(e.YHYMarker,(function(t,a){return r("myOverLay",{key:1e4*(a+3),attrs:{position:{lng:t.position[0],lat:t.position[1]},content:t.content,events:t.events,windowData:e.windows[a]},on:{listenToChildEvent:e.showMsgfromChild}})})),e.window?r("bm-info-window",{attrs:{position:{lng:e.window.position[0],lat:e.window.position[1]},show:e.window.visible,content:e.window.content},on:{close:e.infoWindowClose,open:e.infoWindowOpen}},[r("div",{domProps:{innerHTML:e._s(e.window.content)}})]):e._e(),e._l(e.orderMarker,(function(e,t){return r("myOverLay",{key:10*(t+1),attrs:{position:{lng:e.position[0],lat:e.position[1]},content:e.content}})}))],2)],1)])],1)],1),e.dialogTableVisible?r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"更换验货员",width:"1100px",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[e.form.users?r("div",[r("span",{staticStyle:{"margin-right":"40px"}},[e._v("当前订单："+e._s(e.form.orders_num))]),r("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.form.inspect_time))]),r("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.form.products.map((function(e){return e.product_name})).join(",")))]),r("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.typeObj[e.form.type]))]),r("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.form.insp_number)+" 人")]),r("span",[e._v("验货天数："+e._s(e.form.insp_day)+" 天")])]):e._e(),r("el-divider"),r("div",[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formSearch}},[r("el-form-item",{attrs:{label:"搜索条件"}},[r("el-input",{attrs:{clearable:""},model:{value:e.formSearch.select_value,callback:function(t){e.$set(e.formSearch,"select_value",t)},expression:"formSearch.select_value"}},[r("el-select",{staticStyle:{width:"120px",color:"#333"},attrs:{slot:"prepend",clearable:"",placeholder:"请选择"},slot:"prepend",model:{value:e.formSearch.select_type,callback:function(t){e.$set(e.formSearch,"select_type",t)},expression:"formSearch.select_type"}},[r("el-option",{attrs:{label:"昵称",value:"nick"}}),r("el-option",{attrs:{label:"电话",value:"phone"}}),r("el-option",{attrs:{label:"QQ号",value:"qq_num"}}),r("el-option",{attrs:{label:"城市",value:"city"}})],1)],1)],1),r("el-form-item",[r("el-select",{attrs:{clearable:"",placeholder:"请选择申请状态"},on:{change:e.updateUser},model:{value:e.formSearch.status,callback:function(t){e.$set(e.formSearch,"status",t)},expression:"formSearch.status"}},[r("el-option",{attrs:{label:"已申请",value:1}}),r("el-option",{attrs:{label:"未申请",value:2}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("搜索")])],1)],1),r("el-table",{attrs:{data:e.gridData}},[r("el-table-column",{attrs:{property:"nick",label:"用户名","min-width":"90"}}),r("el-table-column",{attrs:{property:"phone",label:"电话",width:"120"}}),r("el-table-column",{attrs:{property:"qq_num",label:"QQ号",width:"120"}}),r("el-table-column",{attrs:{property:"city",label:"城市"}}),r("el-table-column",{attrs:{property:"grade",label:"等级",width:"60"}}),r("el-table-column",{attrs:{property:"distance",label:"距离",width:"120"}}),r("el-table-column",{attrs:{property:"app_fee",label:"验货申请费用","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" $"+e._s(t.row.app_fee)+" ")]}}],null,!1,1897958081)}),r("el-table-column",{attrs:{property:"actual_fee",label:"验货实际费用","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{staticClass:"ac_money",staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请输入内容",disabled:t.row.inputDisabled},model:{value:t.row.actual_fee,callback:function(a){e.$set(t.row,"actual_fee",a)},expression:"scope.row.actual_fee"}},[r("template",{slot:"prepend"},[e._v("$")])],2),r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.rowChange(t.row)}}},[e._v(e._s(t.row.btnName))])]}}],null,!1,1018604409)}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",loading:t.row.isLoding},on:{click:function(a){return e.assign_insp(t.row.user_id)}}},[e._v("指派")])]}}],null,!1,1639396082)})],1)],1)],1):e._e(),e.uploadVisible?r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"报告管理",visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[r("el-form",{attrs:{model:e.reportForm}},[r("el-form-item",{attrs:{label:"上传类型"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择活动区域"},model:{value:e.reportForm.type,callback:function(t){e.$set(e.reportForm,"type",t)},expression:"reportForm.type"}},[r("el-option",{attrs:{label:"验货图片",value:"insp_picture"}}),r("el-option",{attrs:{label:"廉政承诺书+手写报告",value:"lianzheng"}}),r("el-option",{attrs:{label:"草稿报告",value:"draft"}}),r("el-option",{attrs:{label:"正式报告",value:"formal"}})],1)],1),r("el-form-item",{attrs:{label:"上传文件"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$host.file+"/api/a_u/upload_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.uploadVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleExport()}}},[e._v("确 定")])],1)],1):e._e(),e.addressAddMask?r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑工厂信息",visible:e.addressAddMask,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"500px",id:"addressAddMask"},on:{"update:visible":function(t){e.addressAddMask=t}}},[r("p",{staticClass:"m-b-10 text-grey"},[e._v("例：埃克斯家居，浙江宁波北环东路499号，李念，sales1@aikesijiaju.com，13766664444")]),r("div",{staticClass:"addressAddMask-textArea"},[r("el-input",{attrs:{clearable:"",type:"textarea",rows:"5",placeholder:"请输入联系人,邮箱,手机号,工厂名称,使用英文字符逗号分隔,若无该项请使用空格表示；如,xx联系人,xxx@qq.com,139xxxxxx",maxlength:"100","show-word-limit":""},model:{value:e.addressAddForm.autoFull,callback:function(t){e.$set(e.addressAddForm,"autoFull",t)},expression:"addressAddForm.autoFull"}}),r("el-button",{staticClass:"zlsb-btn",attrs:{size:"mini"},on:{click:e.addressAddFormAutoFullForm}},[e._v("智能识别")])],1),r("el-form",{ref:"addressAddForm",attrs:{model:e.addressAddForm,"label-width":"90px",id:"addressAddForm",rules:e.rules}},[r("el-form-item",{attrs:{label:"工厂名称"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.company_name,callback:function(t){e.$set(e.addressAddForm,"company_name",t)},expression:"addressAddForm.company_name"}})],1),r("el-form-item",{attrs:{label:"联系人"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.name,callback:function(t){e.$set(e.addressAddForm,"name",t)},expression:"addressAddForm.name"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"phone"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.phone,callback:function(t){e.$set(e.addressAddForm,"phone",t)},expression:"addressAddForm.phone"}})],1),r("el-form-item",{attrs:{label:"备用电话",prop:"spare_phone"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.spare_phone,callback:function(t){e.$set(e.addressAddForm,"spare_phone",t)},expression:"addressAddForm.spare_phone"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.email,callback:function(t){e.$set(e.addressAddForm,"email",t)},expression:"addressAddForm.email"}})],1),r("el-form-item",{staticClass:"clear addStart",attrs:{label:"所属区域"}},[r("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:"",filterable:"",placeholder:"请选择国家"},on:{change:function(t){e.addressAddForm.area="",e.addressAddForm.province="",e.addressAddForm.city,e.addressAddForm=Object.assign({},e.addressAddForm)}},model:{value:e.addressAddForm.country,callback:function(t){e.$set(e.addressAddForm,"country",t)},expression:"addressAddForm.country"}},e._l(e.countries,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1),"中国"==e.addressAddForm.country?r("el-cascader",{staticStyle:{width:"150px"},attrs:{clearable:"",options:e.provinces,placeholder:"请选择",props:{value:"areaName",label:"areaName",children:"child"},filterable:""},on:{change:function(t){e.addressAddForm.address=""}},model:{value:e.addressAddForm.area,callback:function(t){e.$set(e.addressAddForm,"area",t)},expression:"addressAddForm.area"}}):r("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择省份"},model:{value:e.addressAddForm.province,callback:function(t){e.$set(e.addressAddForm,"province",t)},expression:"addressAddForm.province"}}),"中国"!=e.addressAddForm.country?r("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择城市"},model:{value:e.addressAddForm.city,callback:function(t){e.$set(e.addressAddForm,"city",t)},expression:"addressAddForm.city"}}):e._e()],1),r("el-form-item",{attrs:{label:"详细地址"}},[r("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.address,callback:function(t){e.$set(e.addressAddForm,"address",t)},expression:"addressAddForm.address"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.addFacatoryAddress}},[e._v("确 定")])],1)],1):e._e()],1)},s=[],i=(a("b4fb"),a("dbb3"),a("fe59"),a("b130"),a("9302"),a("2eeb"),a("77ad"),a("ea69"),a("053b"),a("513c"),a("e18c"),a("e35a"),a("90aa"),a("96db"),a("5e9f"),a("0d7a"),a("08ba"),a("af86"),a("f1a9"),a("fb16")),n=(a("6a61"),a("457c")),o=a("b3f7"),l=a("ac6e"),c=a("2c01"),d="",p={name:"orderIndex",data:function(){return{rules:{phone:[{validator:this.$check.isPhone,trigger:"blur"}],spare_phone:[{validator:this.$check.isPhone,trigger:"blur"}],email:[{validator:this.$check.isEmails,trigger:"blur"}]},currentPathName:"",menus:[{path:"http://www.inspector.ltd/#/index/index",name:"index",label:"首页",translate:"layout_home"},{path:"http://www.inspector.ltd/#/insp/orderManage",name:"wantOrder",label:"我的订单",translate:"layout_wddd"},{path:"http://www.inspector.ltd/#/index/index",name:"ourServer",label:"验货服务",translate:"layout_wmdfw"},{path:"http://www.inspector.ltd/#/index/aboutUs",name:"aboutUs",label:"关于平台",translate:"layout_aywm"}],countries:[],provinces:[],annexsId:"",productdialogVisible:!1,productData:{},tipdialogVisible:!1,tipData:{sample:"",standard:"",critical:"",major:"",minor:"",remark:""},imageUrl:"",reportForm:{},uploadVisible:!1,addressAddMask:!1,addressAddForm:{autoFull:"",company_name:"",name:"",phone:"",spare_phone:"",email:"",area:"",address:"",setDefaultAddress:!1},addressListOptions:{label:"name",value:"name",children:"child"},addressList:[],mapSelectMask:!0,dialogTableVisible:!1,form:{},formSearch:{select_type:"nick",select_value:""},gridData:[],replyScene:{1:"用户",2:"验货员"},sceneObj:{1:"用户",2:"工厂",3:"管理员"},messageList:[],orderIndex:0,typeObj:{1:"抽检",2:"全检",3:"在线检验",4:"验厂",5:"验柜",6:"验货+检柜"},editorOption:{placeholder:"编辑内容"},unitList:["个","只","双","套","打","卷","辆","头","袋","箱","包","码","米","千克","公吨","公升","加仑","其它"],samplingList:["II级","I级","III级","S-1","S-2","S-3"],AQLList:["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"],MajorList:["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"],MinorList:["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"],categoryList:[],props:{label:"name",value:"id",children:"child",emitPath:!1},orderType:[{name:"验货信息"},{name:"历史记录"},{name:"查看评价"}],Map:"",orderData:{users:{},inspectors:[]},orderMarker:[],YHYMarker:[],windows:[],window:"",center:{lng:0,lat:0},orderAliasMask:!1,maxPrice:""}},components:{myOverLay:o["a"]},computed:{rowChange:function(e){!0===e.inputDisabled?(e.btnName="确定",e.inputDisabled=!1):(e.btnName="修改",e.inputDisabled=!0,this.updateAcFee(e.user_id,e.actual_fee))},inspectors:function(){var e=this.orderData?this.orderData.inspectors.map((function(e){return e.users})):{},t=[];return e.length&&e.forEach((function(e){e.nick&&t.push(e.nick)})),t.join(",")}},methods:{rowChange:function(e){!0===e.inputDisabled?(e.btnName="确定",e.inputDisabled=!1):(e.btnName="修改",e.inputDisabled=!0,this.updateAcFee(e.user_id,e.actual_fee))},seeOrder:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={order_id:t.$route.query.id,user_id:t.$route.query.user_id,status:e},a.next=3,Object(l["C"])(r);case 3:s=a.sent,i=s.data,n=i.code,o=i.msg,200==n?t.$check.success.call(t,o):t.$check.error.call(t,o);case 6:case"end":return a.stop()}}),a)})))()},handleClick:function(e){window.open(e),this.currentPathName=e},fetchCountries:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["A"])();case 2:a=t.sent,r=a.data,s=r.code,i=r.data,200==s&&(e.countries=i);case 5:case"end":return t.stop()}}),t)})))()},fetchProvince:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["B"])();case 2:a=t.sent,r=a.data,s=r.code,i=r.data,200==s&&(e.provinces=i);case 5:case"end":return t.stop()}}),t)})))()},checkFile:function(e){var t=!1,a=!1,r=["pdf","pptx","doc","docx","xls","xlsx","jpg","png","jpeg","zip","rar"],s=e.name.split(".")[e.name.split(".").length-1];return r.includes(s)||(t=!0),e.size/1024/1024>=100&&(a=!0),t?(this.$check.error.call(this,"所选的文件列表中类型不支持!"),!1):a?(this.$check.error.call(this,"所选的文件列表中大小不能超过30MB!"),!1):void 0},handleRemove:function(e,t){var a=e.response.data.file_path;this.fileList=this.fileList.filter((function(e){return e!=a}))},uploadSuccess:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.code,e.data.file_path,s={id:t.annexsId,path:e.data.file_path},200!=r){a.next=8;break}return a.next=5,Object(l["F"])(s);case 5:i=a.sent,n=i.data,o=n.code,n.msg,200==o&&(t.$message.success("替换成功"),t.getTableData());case 8:case"end":return a.stop()}}),a)})))()},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},oneDown:function(e){var t=this;e.length&&e.forEach((function(e){t.enclosureDown(e.path)}))},enclosureDown:function(e){var t=this.imgAPI+e;/.(png|jpg|jpeg|gif)$/g.test(e)?this.downloadPic(t):window.location.href=t},showMsgfromChild:function(e){this.window=e},infoWindowClose:function(e){this.window.visible=!1},infoWindowOpen:function(e){this.window.visible=!0},open:function(e){window.open(this.$host.file+e.path)},handleExport:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(i["a"])({order_id:e.$route.query.id},e.reportForm),t.next=3,Object(l["w"])(a);case 3:r=t.sent,s=r.data,n=s.code,o=s.msg,200==n?(e.$check.success.call(e,o),e.uploadVisible=!1,e.getTableData()):e.$check.error.call(e,o);case 6:case"end":return t.stop()}}),t)})))()},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.reportForm.path=e.data.file_path},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},handleSample:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(i["a"])({order_id:e.$route.query.id},e.tipData),t.next=3,Object(l["x"])(a);case 3:r=t.sent,s=r.data,n=s.code,o=s.msg,200==n?(e.$check.success.call(e,o),e.tipdialogVisible=!1,e.getTableData()):e.$check.error.call(e,o);case 6:case"end":return t.stop()}}),t)})))()},addFacatoryAddress:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,n,o,c,d,p,u,m,f,h,b,v,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.addressAddForm,r=a.name,s=a.phone,i=a.country,n=a.province,o=a.city,c=a.company_name,d=a.spare_phone,p=a.email,u=a.area,m=a.address,a.setDefaultAddress,!e.$check.isEmpty(c)){t.next=4;break}return e.$check.error.call(e,"工厂名称不能为空"),t.abrupt("return");case 4:if(!e.$check.isEmpty(r)){t.next=7;break}return e.$check.error.call(e,"联系人不能为空"),t.abrupt("return");case 7:if(!d||!e.$check.isTel(d)){t.next=10;break}return e.$check.error.call(e,"备用电话格式不正确!"),t.abrupt("return");case 10:if(!e.$check.isEmail(p)){t.next=13;break}return e.$check.error.call(e,"邮箱不能为空"),t.abrupt("return");case 13:if(!e.$check.isEmpty(u)){t.next=16;break}return e.$check.error.call(e,"所属区域不能为空"),t.abrupt("return");case 16:if(!e.$check.isEmpty(m)){t.next=19;break}return e.$check.error.call(e,"详细地址不能为空"),t.abrupt("return");case 19:return f={company_name:c,name:r,phone:s,spare_phone:d,email:p,country:i,province:u?u[0]:n,city:u?u[1]:o,address:m,order_id:e.$route.query.id},t.next=22,Object(l["b"])(f);case 22:h=t.sent,b=h.data,v=b.code,_=b.msg,200==v?(e.addressAddMask=!1,e.$check.success.call(e,_),e.factorysAddressIdx=1,e.getTableData(),e.addressAddForm.autoFull=""):e.$check.error.call(e,_);case 25:case"end":return t.stop()}}),t)})))()},clearAddressAddForm:function(){this.addressAddForm.name="",this.addressAddForm.phone="",this.addressAddForm.company_name="",this.addressAddForm.spare_phone="",this.addressAddForm.email="",this.addressAddForm.area="",this.addressAddForm.address="",this.addressAddForm.setDefaultAddress=!1},getAddressList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["l"])();case 2:a=t.sent,r=a.data,s=r.code,i=r.data,200==s&&(e.addressList=i);case 5:case"end":return t.stop()}}),t)})))()},addressAddFormAutoFullForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o,l,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=[],e.addressAddForm.autoFull=e.addressAddForm.autoFull.replace(/，/g,","),a=e.addressAddForm.autoFull.includes(",")?e.addressAddForm.autoFull.split(","):e.addressAddForm.autoFull.split("，"),r=/^\w+@\w+(\.\w+)+$/,s=0;case 5:if(!(s<a.length)){t.next=13;break}if(!r.test(a[s])){t.next=10;break}return e.addressAddForm.email=a[s],a.splice(s,1),t.abrupt("break",13);case 10:s++,t.next=5;break;case 13:n=/^1[3456789]\d{9}$/,o=0;case 15:if(!(o<a.length)){t.next=23;break}if(!n.test(a[o])){t.next=20;break}return e.addressAddForm.phone=a[o],a.splice(o,1),t.abrupt("break",23);case 20:o++,t.next=15;break;case 23:l=/^[((\+\d+)*)(\d+\-)*]*\s*\d+$/,c=0;case 25:if(!(c<a.length)){t.next=33;break}if(!l.test(a[c])){t.next=30;break}return e.addressAddForm.spare_phone=a[c],a.splice(c,1),t.abrupt("break",33);case 30:c++,t.next=25;break;case 33:return d=a[1],t.next=36,e.getAddressSearchFromGaode(null,d);case 36:e.addressAddForm.company_name=a[0],e.addressAddForm.name=a[2],e.addressAddForm=Object(i["a"])({},e.addressAddForm);case 39:case"end":return t.stop()}}),t)})))()},getAddressSearchFromGaode:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,s,i,n,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={keywords:t||city||"浙江省宁波市",city:""},e.next=3,Object(l["d"])(r);case 3:if(s=e.sent,i=s.data.data.data,n=i.pois.slice(0,10).map((function(e){return e.value=e.name,e})),n.length){e.next=9;break}return a.$message.error("请输入正确的地址"),e.abrupt("return");case 9:o=n[0].pname,c=n[0].cityname,a.addressAddForm.area=[o,c],a.addressAddForm.address=n[0].address;case 13:case"end":return e.stop()}}),e)})))()},editProduct:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={products:e.productData},t.next=3,Object(l["k"])(Object.assign(a));case 3:r=t.sent,s=r.data,i=s.code,s.data,n=s.msg,200==i?(e.$check.success.call(e,n),e.productdialogVisible=!1,e.getTableData()):e.$check.error.call(e,n);case 6:case"end":return t.stop()}}),t)})))()},updateAcFee:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(Number(t)>Number(a.maxPrice))){r.next=3;break}return a.$message.error("修改费用不能高于订单费用"),r.abrupt("return");case 3:return s={inspector:e,order_id:a.$route.query.id,fee:t,is_dis:0},r.next=6,Object(c["h"])(Object.assign(s));case 6:i=r.sent,n=i.data,o=n.code,n.data,200==o&&a.updateUser();case 9:case"end":return r.stop()}}),r)})))()},assign_insp:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.gridData.forEach((function(t){t.user_id==e&&(t["isLoding"]=!0)})),t.$set(t.gridData),r={inspector:e,order_id:t.$route.query.id,pr_inspector:t.orderData.user_id},a.next=5,Object(c["a"])(Object.assign(r));case 5:s=a.sent,i=s.data,n=i.code,i.data,200==n?(t.$check.success.call(t,msg),t.getTableData()):(t.gridData.forEach((function(t){t.user_id==e&&(t["isLoding"]=!1)})),t.$set(t.gridData),t.$check.error.call(t,msg));case 8:case"end":return a.stop()}}),a)})))()},updateUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(i["a"])(Object(i["a"])({},e.formSearch),{},{order_id:e.$route.query.id}),t.next=3,Object(c["g"])(Object.assign(a));case 3:r=t.sent,s=r.data,s.code,n=s.data,e.form=n.order,e.maxPrice=n.order.price,e.gridData=n.insp.map((function(e){return e.btnName="修改",e.inputDisabled=!0,e})),e.gridData.forEach((function(e){e["isLoding"]=!1})),e.users=n.users;case 10:case"end":return t.stop()}}),t)})))()},handleBack:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order_id:e.$route.query.id},t.next=3,Object(l["v"])(Object.assign(a));case 3:r=t.sent,s=r.data,s.data,i=s.code,200==i&&(e.$message.success("退回成功"),e.orderAliasMask=!1,e.$router.go(-1));case 6:case"end":return t.stop()}}),t)})))()},getInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.messageList={},r={order_id:t.$route.query.id},s={},1!=e){a.next=10;break}return i={orders_id:t.$route.query.id},a.next=7,Object(l["t"])(Object.assign(i));case 7:s=a.sent,a.next=14;break;case 10:if(2!=e){a.next=14;break}return a.next=13,Object(l["s"])(Object.assign(r));case 13:s=a.sent;case 14:n=s.data,o=n.data,n.code,t.messageList=o;case 16:case"end":return a.stop()}}),a)})))()},init:function(){var e=new AMap.Map("container",{center:[116.397428,39.90923],resizeEnable:!0,zoom:10});d=e,this.Map=e,AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView","AMap.MapType","AMap.Geolocation"],(function(){e.addControl(new AMap.ToolBar),e.addControl(new AMap.Scale({position:"lb"})),e.addControl(new AMap.OverView({isOpen:!0})),e.addControl(new AMap.MapType),e.addControl(new AMap.Geolocation)}))},getTableData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={order_id:e.$route.query.id},t.next=3,Object(l["u"])(Object.assign(a));case 3:r=t.sent,s=r.data,i=s.code,n=s.data,200==i&&(e.orderData=n,e.addressAddForm.company_name=n.factorys.company_name,e.addressAddForm.area=[n.factorys.province,n.factorys.city],e.addressAddForm.country=n.factorys.country,e.addressAddForm.province=n.factorys.province,e.addressAddForm.city=n.factorys.city,e.addressAddForm.address=n.factorys.address,e.addressAddForm.name=n.factorys.name,e.addressAddForm.phone=n.factorys.phone,e.addressAddForm.email=n.factorys.email,e.orderData&&(e.addMarker(e.orderData.lon,e.orderData.lat),e.orderData.inspectors.length&&e.orderData.inspectors.forEach((function(t){var a=[t.users.lon,t.users.lat];e.addUserMarker(a,t.users.head,t.users)}))));case 6:case"end":return t.stop()}}),t)})))()},addMarker:function(e,t){var a=[e,t];this.center={lng:e,lat:t},this.orderMarker.push({content:'<div style="width:20px;height:20px;border-radius:50%;background-color:red;"></div>',position:a||[]})},addUserMarker:function(e,t,a){this.windows.push({position:e||[],content:'<div class="prompt clearfixed fs-12"><div class="pull-left w-70 text-center"><img src="'.concat(this.$host.file+a.head,'" class="b-round" width="40px" height="40px"></div><div class="pull-left w-150 lh-20"><p>').concat(a.nick,"</p><p>电话：").concat(a.phone,"</p></div></div>"),visible:!1}),this.YHYMarker.push({content:'<div style="border-radius:50%;overflow:hidden;">\n                  <img style="width:40px;height:40px" src="'.concat(this.$host.file+a.head,'"></div>'),position:e||[]})},getInfoWindow:function(e){var t="",a=[];a.push("<img  src="+this.$host.file+e.head+">"),a.push("姓名："+e.nick),a.push("电话："+e.phone),this.infoWindow=new AMap.InfoWindow({isCustom:!0,content:this.createInfoWindow(t,a.join("<br/>")),offset:new AMap.Pixel(60,-10)})},createInfoWindow:function(e,t){var a=document.createElement("div");a.className="custom-info input-card content-window-card";var r=document.createElement("div"),s=document.createElement("div"),i=document.createElement("img");r.className="info-top",s.innerHTML=e,i.src="https://webapi.amap.com/images/close2.gif",i.onclick=u,r.appendChild(s),r.appendChild(i),a.appendChild(r);var n=document.createElement("div");n.className="info-middle",n.style.backgroundColor="white",n.innerHTML=t,a.appendChild(n);var o=document.createElement("div");o.className="info-bottom",o.style.position="relative",o.style.top="0px",o.style.margin="0 auto";var l=document.createElement("img");return l.src="https://webapi.amap.com/images/sharp.png",o.appendChild(l),a.appendChild(o),a},addProductTypeRow:function(e){this.orderData.products[e].models.push({mark:"",amount:"",unit:"件"})},addProductAllRow:function(){this.orderData.products.push({category_id:"",po_num:"",product_name:"",hidden:!1,models:[{mark:"",amount:"",unit:"件"}]})},getCategory:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["m"])();case 2:a=t.sent,r=a.data,s=r.code,i=r.data,200==s&&(e.categoryList=i);case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.init(),this.getTableData(),this.getCategory(),this.getAddressList(),this.fetchCountries(),this.fetchProvince()}};function u(){d.clearInfoWindow()}var m=p,f=(a("b0c5"),a("9ca4")),h=Object(f["a"])(m,r,s,!1,null,"e1f19756",null);t["default"]=h.exports},b0c5:function(e,t,a){"use strict";var r=a("efd3"),s=a.n(r);s.a},efd3:function(e,t,a){}}]);