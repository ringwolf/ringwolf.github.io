(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8960d80"],{"1a63":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"orderDetail",staticStyle:{height:"100%"}},[s("div",{staticClass:"order-head"},[s("div",{staticClass:"logo m-r-80 pull-left",staticStyle:{"margin-left":"20px","margin-top":"-15px"}},[s("img",{staticClass:"w-200",attrs:{src:a("9d64"),alt:""},on:{click:function(t){return e.openWeb()}}})]),s("span",{staticStyle:{"margin-left":"-100px"}},[e._v("订单详情")])]),s("div",{staticClass:"order-basicInfo"},["insp"==this.$route.query.type?s("div",{staticClass:"fs-20",staticStyle:{margin:"20px 0"}},[e._v(" 尊敬的"+e._s(e.inspectors)+"，您收到一个验货任务，请确认 "),s("el-button",{staticStyle:{"border-radius":"5px","margin-left":"15px"},attrs:{type:"success"},on:{click:function(t){return e.seeOrder(1)}}},[e._v("确 认")]),s("el-button",{staticStyle:{"border-radius":"5px"},attrs:{type:"danger"},on:{click:function(t){return e.seeOrder(2)}}},[e._v("拒 绝")])],1):e._e(),s("div",[s("el-row",[s("el-col",{attrs:{span:5}},[s("span",{staticStyle:{display:"inline-block","margin-right":"30px"}},[e._v("订单号："+e._s(e.orderData.orders_num))])]),s("el-col",{attrs:{span:4}},[s("span",[e._v("付款时间："+e._s(e.orderData.pay_time))])]),s("el-col",{attrs:{span:4}},[s("span",[e._v("验货费用："+e._s(e.orderData.price))])]),s("el-col",{attrs:{span:4}},["factory"==this.$route.query.type?s("p",{staticClass:"text-yellow pull-right"},[e._v("请精确工厂地址，方便验货员验货")]):e._e()])],1)],1),s("div",{staticClass:"order-basic"},[s("el-row",[s("el-col",{attrs:{span:5}},[s("span",[e._v("委托方："+e._s(e.orderData.users.nick||e.orderData.users.name))])]),s("el-col",{attrs:{span:4}},[s("span",[e._v("验货类型："+e._s(e.typeObj[e.orderData.type]))])]),s("el-col",{attrs:{span:4}},[s("span",[e._v("验货时间："+e._s(e.orderData.inspect_time))])]),s("el-col",{attrs:{span:4}},[s("span",[e._v("验货时长（天数）："+e._s(e.orderData.insp_day)+"天")])]),s("el-col",{attrs:{span:3}},[s("span",[e._v("验货人数："+e._s(e.orderData.insp_number)+"人")])]),s("el-col",{attrs:{span:3}},[s("span",[e._v("验货员："+e._s(e.inspectors))])])],1)],1)]),e.orderAliasMask?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"订单退回",visible:e.orderAliasMask,width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.orderAliasMask=t}}},[s("p",[e._v("您确定要退回订单吗？")]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.handleBack}},[e._v("确 定")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.orderAliasMask=!1}}},[e._v("取 消")])],1)]):e._e(),s("div",{staticClass:"order-main"},[s("el-row",{staticStyle:{width:"100%",height:"100%",margin:"0"},attrs:{gutter:20}},[s("el-col",{staticClass:"yanhuo-left",staticStyle:{height:"100%",overflow:"auto"},attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("div",[s("ul",{staticClass:"title-type"},e._l(e.orderType,(function(t,a){return s("li",{key:a,class:e.orderIndex==a?"active":"",on:{click:function(t){e.orderIndex=a,e.getInfo(a)}}},[e._v(e._s(t.name))])})),0),0==e.orderIndex?s("div",{staticClass:"basic-main"},[s("div",{staticClass:"basic-info"},[s("div",{staticClass:"basic-info-head"},[s("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("工厂信息")]),"factory"==this.$route.query.type?s("span",{staticStyle:{color:"#02A7F0","font-size":"14px",float:"right",cursor:"pointer"},on:{click:function(t){e.addressAddMask=!0,e.addressAddForm.autoFull=""}}},[e._v("变更")]):e._e()]),s("div",{staticClass:"basic-info-body shao-table"},[s("p",[s("span",[e._v("工厂名称：")]),s("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.company_name:"暂无数据"))])]),s("p",[s("span",[e._v("联系人：")]),s("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.name:"暂无数据"))])]),s("p",[s("span",[e._v("联系电话：")]),s("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.phone:"暂无数据"))])]),s("p",[s("span",[e._v("邮 箱：")]),s("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.email:"暂无数据"))])]),s("p",[s("span",[e._v("工厂地址：")]),s("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.country+e.orderData.factorys.city+e.orderData.factorys.address:"暂无数据"))])]),s("p",{staticStyle:{flex:"0 0 50%"}},[s("span",[e._v("备用电话")]),s("span",[e._v(e._s(e.orderData.factorys?e.orderData.factorys.spare_phone:"暂无数据"))])])])]),s("div",{staticClass:"basic-info"},[s("div",{staticClass:"basic-info-head"},[s("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("产品信息")])]),s("div",{staticClass:"basic-info-body"},e._l(e.orderData.products,(function(t,a){return s("div",{key:a,staticClass:"m-t-10"},[s("i",{class:t.hidden?"el-icon-caret-right":"el-icon-caret-bottom",staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(e){t.hidden=!t.hidden}}}),s("div",{staticClass:"fs-12 d-inline-block"},[s("span",[e._v("产品分类")]),s("el-cascader",{staticClass:"wd150",attrs:{clearable:"",props:e.props,options:e.categoryList},model:{value:t.category_id,callback:function(a){e.$set(t,"category_id",a)},expression:"item.category_id"}})],1),s("div",{staticClass:"fs-12 d-inline-block"},[s("span",[e._v("P.O号")]),s("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入P.O号"},model:{value:t.po_num,callback:function(a){e.$set(t,"po_num",a)},expression:"item.po_num"}})],1),s("div",{staticClass:"fs-12 d-inline-block"},[s("span",[e._v("产品名称")]),s("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品名称"},model:{value:t.product_name,callback:function(a){e.$set(t,"product_name",a)},expression:"item.product_name"}})],1),e._l(t.models,(function(a,r){return s("div",{key:r,class:["bg-grey","product-children",t.hidden?"hidden":""],staticStyle:{"margin-top":"10px"}},[s("div",{staticClass:"mtb10 addStart d-inline-block",attrs:{prop:"product_type"}},[s("span",[e._v("产品型号")]),s("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品型号"},model:{value:a.mark,callback:function(t){e.$set(a,"mark",t)},expression:"item2.mark"}})],1),s("div",{staticClass:"mtb10 addStart d-inline-block"},[s("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",type:"number",min:"1",placeholder:"请输入数量"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"item2.amount"}},[s("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append",clearable:"",placeholder:"请选择"},slot:"append",model:{value:a.unit,callback:function(t){e.$set(a,"unit",t)},expression:"item2.unit"}},e._l(e.unitList,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)])}))],2)})),0),e.productdialogVisible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"产品信息更改",visible:e.productdialogVisible,width:"50%"},on:{"update:visible":function(t){e.productdialogVisible=t}}},[e._l(e.productData,(function(t,a){return s("div",{key:a,staticClass:"m-t-10"},[s("i",{class:t.hidden?"el-icon-caret-right":"el-icon-caret-bottom",staticStyle:{padding:"5px",cursor:"pointer"},on:{click:function(e){t.hidden=!t.hidden}}}),s("div",{staticClass:"fs-12 d-inline-block"},[s("span",[e._v("产品分类")]),s("el-cascader",{staticClass:"wd150",attrs:{clearable:"",props:e.props,options:e.categoryList},model:{value:t.category_id,callback:function(a){e.$set(t,"category_id",a)},expression:"item.category_id"}})],1),s("div",{staticClass:"fs-12 d-inline-block"},[s("span",[e._v("P.O号")]),s("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入P.O号"},model:{value:t.po_num,callback:function(a){e.$set(t,"po_num",a)},expression:"item.po_num"}})],1),s("div",{staticClass:"fs-12 d-inline-block"},[s("span",[e._v("产品名称")]),s("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品名称"},model:{value:t.product_name,callback:function(a){e.$set(t,"product_name",a)},expression:"item.product_name"}})],1),e._l(t.models,(function(a,r){return s("div",{key:r,class:["bg-grey","product-children",t.hidden?"hidden":""],staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"mtb10 addStart d-inline-block",attrs:{prop:"product_type"}},[s("span",[e._v("产品型号")]),s("el-input",{staticClass:"wd150",attrs:{clearable:"",placeholder:"请输入产品型号"},model:{value:a.mark,callback:function(t){e.$set(a,"mark",t)},expression:"item2.mark"}})],1),s("div",{staticClass:"mtb10 addStart d-inline-block"},[s("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"",type:"number",min:"1",placeholder:"请输入数量"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"item2.amount"}},[s("el-select",{staticStyle:{width:"80px"},attrs:{slot:"append",clearable:"",placeholder:"请选择"},slot:"append",model:{value:a.unit,callback:function(t){e.$set(a,"unit",t)},expression:"item2.unit"}},e._l(e.unitList,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)])}))],2)})),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.productdialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editProduct()}}},[e._v("确 定")])],1)],2):e._e()],1),s("div",{staticClass:"basic-info"},[s("div",{staticClass:"basic-info-head"},[s("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("附件信息")]),s("span",{staticStyle:{color:"#02A7F0","font-size":"14px",float:"right",cursor:"pointer"},on:{click:function(t){return e.oneDown(e.orderData.annexs)}}},[e._v("一键下载")])]),s("div",{staticClass:"basic-info-body"},e._l(e.orderData.annexs,(function(t,a){return s("p",{key:a},[e._v(" 附 件 "+e._s(a+1)+"： "),s("span",{on:{click:function(a){return e.enclosureDown(t.path)}}},[e._v(e._s(t.path))]),s("el-upload",{ref:"upload",refInFor:!0,staticClass:"pull-right",attrs:{action:e.$host.file+"/api/a_u/upload_file","show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-success":e.uploadSuccess,"on-remove":e.handleRemove,"before-upload":e.checkFile}})],1)})),0)]),s("div",{staticClass:"basic-info"},[s("div",{staticClass:"basic-info-head"},[s("span",{staticClass:"shao-h3",staticStyle:{color:"#7B4D12","font-size":"16px","font-weight":"700",float:"left"}},[e._v("样品及注意事项")])]),s("div",{staticClass:"basic-info-body shao-table"},[s("p",{staticStyle:{flex:"0 0 100%"}},[s("span",[e._v("提供样品：")]),s("span",[e._v(e._s(1==e.orderData.sample?"未提供样品":2==e.orderData.sample?"送往或已在工厂":3==e.orderData.sample?"送往验货在线":""))])]),2!=e.orderData.type&&4!=e.orderData.type&&5!=e.orderData.type?s("div",{staticClass:"shao-table",staticStyle:{width:"100%"}},[s("p",[s("span",[e._v("抽样标准：")]),s("span",[e._v(e._s(e.orderData.standard?e.orderData.standard:"未填写"))])]),s("p",[s("span",[e._v("AQL：")]),s("span",[e._v(e._s(e.orderData.critical?e.orderData.critical:"未填写"))])]),s("p",{staticStyle:{flex:"0 0 50%"}},[s("span",[e._v("Major：")]),s("span",[e._v(e._s(e.orderData.major?e.orderData.major:"未填写"))])]),s("p",{staticStyle:{flex:"0 0 50%"}},[s("span",[e._v("Minor：")]),s("span",[e._v(e._s(e.orderData.minor?e.orderData.minor:"未填写"))])])]):e._e(),s("p",{staticStyle:{flex:"0 0 100%"}},[s("span",[e._v("注意事项：")]),e.orderData.remark?s("span",{domProps:{innerHTML:e._s(e.orderData.remark)}}):s("span",[e._v("未填写")])])]),e.tipdialogVisible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"注意事项更改",visible:e.tipdialogVisible,width:"50%"},on:{"update:visible":function(t){e.tipdialogVisible=t}}},[s("el-form",{attrs:{inline:!0}},[s("el-form-item",{staticClass:"addStart",attrs:{label:"提供样品",prop:"sample"}},[s("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.sample,callback:function(t){e.$set(e.tipData,"sample",t)},expression:"tipData.sample"}},[s("el-option",{attrs:{label:"未提供样品",value:1}}),s("el-option",{attrs:{label:"送往或已在工厂",value:2}}),s("el-option",{attrs:{label:"送往验货在线",value:3}})],1)],1),s("br"),2!=e.orderData.type&&4!=e.orderData.type&&5!=e.orderData.type?s("div",[s("el-form-item",{staticClass:"addStart",attrs:{label:"抽样标准",prop:"standard"}},[s("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.standard,callback:function(t){e.$set(e.tipData,"standard",t)},expression:"tipData.standard"}},e._l(e.samplingList,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),s("el-form-item",{staticClass:"addStart",attrs:{label:"AQL CRITICAL",prop:"critical"}},[s("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.critical,callback:function(t){e.$set(e.tipData,"critical",t)},expression:"tipData.critical"}},e._l(e.AQLList,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),s("el-form-item",{staticClass:"addStart",attrs:{label:"MAJOR",prop:"major"}},[s("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.major,callback:function(t){e.$set(e.tipData,"major",t)},expression:"tipData.major"}},e._l(e.MajorList,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),s("el-form-item",{staticClass:"addStart",attrs:{label:"MINOR",prop:"minor"}},[s("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.tipData.minor,callback:function(t){e.$set(e.tipData,"minor",t)},expression:"tipData.minor"}},e._l(e.MinorList,(function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1):e._e(),s("br"),s("el-form-item",{staticClass:"addStart",staticStyle:{width:"100%",height:"200px"},attrs:{label:"注意事项",id:"zysx",prop:"remark"}},[s("el-input",{attrs:{clearable:"",type:"textarea"},model:{value:e.tipData.remark,callback:function(t){e.$set(e.tipData,"remark",t)},expression:"tipData.remark"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.tipdialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSample()}}},[e._v("确 定")])],1)],1):e._e()],1)]):s("div",{staticClass:"other-tab"},[1==e.orderIndex?s("div",[s("ul",{staticClass:"message-list historyUl"},e._l(e.messageList,(function(t,a){return s("li",{key:a,staticClass:"clearfixed"},[s("div",{staticClass:"pull-left",staticStyle:{"border-right":"1px solid #eee","padding-right":"10px",width:"30px"}},[e._v(e._s(a+1))]),s("div",{staticClass:"text-yellow pull-left m-l-20",staticStyle:{"border-right":"1px solid #eee","padding-right":"10px"}},[e._v(e._s(t.create_at))]),s("div",{staticClass:"pull-left m-l-20 text-grey",staticStyle:{"padding-left":"10px"}},[e._v(e._s(t.content))])])})),0)]):e._e(),2==e.orderIndex?s("div",[e.messageList.length?s("ul",{staticClass:"message-list commentUl"},e._l(e.messageList,(function(t,r){return s("li",{key:r,staticClass:"comment-first",staticStyle:{margin:"10px 0"}},[s("div",{staticStyle:{float:"left","max-width":"70%"}},[e._v(" "+e._s(e.sceneObj[t.scene])+"说："+e._s(t.content)+" "),s("div",{staticClass:"create_at"},[e._v(e._s(t.create_at))]),s("div",[s("ul",e._l(t.child,(function(t,a){return s("li",{key:a,staticStyle:{"margin-top":"20px"}},[e._v(" "+e._s(e.replyScene[t.reply_scene])+"回复："+e._s(t.content)+" "),s("div",{staticClass:"create_at"},[e._v(e._s(t.create_at))])])})),0)])]),s("div",{staticClass:"text-grey",staticStyle:{float:"right"}},e._l(t.score,(function(e,t){return s("img",{key:t,attrs:{src:a("5e13")}})})),0)])})),0):s("p",{staticStyle:{color:"#333","text-align":"center","margin-top":"150px"}},[e._v("暂无评价")])]):e._e(),3==e.orderIndex?s("div",[s("ul",{staticClass:"message-list"},e._l(e.messageList,(function(t,a){return s("li",{key:a,staticStyle:{margin:"10px 0"}},[e._v(" "+e._s(e.sceneObj[t.scene])+"说："+e._s(t.content)+" "),s("div",{staticClass:"text-grey",staticStyle:{float:"right"}},[e._v(e._s(t.score)+"星")]),s("div",[s("ul",e._l(t.child,(function(t,a){return s("li",{key:a,staticStyle:{margin:"10px"}},[e._v(e._s(e.replyScene[t.reply_scene])+"回复："+e._s(t.content))])})),0)])])})),0)]):e._e()])])])]),s("el-col",{staticStyle:{height:"100%",padding:"0"},attrs:{span:12}},[s("div",{staticStyle:{width:"100%",height:"100%"}},[s("baidu-map",{staticClass:"amap-box",staticStyle:{height:"100%"},attrs:{zoom:15,center:e.center,dragging:!0,"scroll-wheel-zoom":!0}},[s("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_LEFT"}}),s("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP","BMAP_SATELLITE_MAP"],anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),s("bm-scale",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_LEFT"}}),s("bm-overview-map",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",isOpen:!0}}),e._l(e.YHYMarker,(function(t,a){return s("myOverLay",{key:1e4*(a+3),attrs:{position:{lng:t.position[0],lat:t.position[1]},content:t.content,events:t.events,windowData:e.windows[a]},on:{listenToChildEvent:e.showMsgfromChild}})})),e.window?s("bm-info-window",{attrs:{position:{lng:e.window.position[0],lat:e.window.position[1]},show:e.window.visible,content:e.window.content},on:{close:e.infoWindowClose,open:e.infoWindowOpen}},[s("div",{domProps:{innerHTML:e._s(e.window.content)}})]):e._e(),e._l(e.orderMarker,(function(e,t){return s("myOverLay",{key:10*(t+1),attrs:{position:{lng:e.position[0],lat:e.position[1]},content:e.content}})}))],2)],1)])],1)],1),e.dialogTableVisible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"更换验货员",width:"1100px",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[e.form.users?s("div",[s("span",{staticStyle:{"margin-right":"40px"}},[e._v("当前订单："+e._s(e.form.orders_num))]),s("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.form.inspect_time))]),s("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.form.products.map((function(e){return e.product_name})).join(",")))]),s("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.typeObj[e.form.type]))]),s("span",{staticStyle:{"margin-right":"40px"}},[e._v(e._s(e.form.insp_number)+" 人")]),s("span",[e._v("验货天数："+e._s(e.form.insp_day)+" 天")])]):e._e(),s("el-divider"),s("div",[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formSearch}},[s("el-form-item",{attrs:{label:"搜索条件"}},[s("el-input",{attrs:{clearable:""},model:{value:e.formSearch.select_value,callback:function(t){e.$set(e.formSearch,"select_value",t)},expression:"formSearch.select_value"}},[s("el-select",{staticStyle:{width:"120px",color:"#333"},attrs:{slot:"prepend",clearable:"",placeholder:"请选择"},slot:"prepend",model:{value:e.formSearch.select_type,callback:function(t){e.$set(e.formSearch,"select_type",t)},expression:"formSearch.select_type"}},[s("el-option",{attrs:{label:"昵称",value:"nick"}}),s("el-option",{attrs:{label:"电话",value:"phone"}}),s("el-option",{attrs:{label:"QQ号",value:"qq_num"}}),s("el-option",{attrs:{label:"城市",value:"city"}})],1)],1)],1),s("el-form-item",[s("el-select",{attrs:{clearable:"",placeholder:"请选择申请状态"},on:{change:e.updateUser},model:{value:e.formSearch.status,callback:function(t){e.$set(e.formSearch,"status",t)},expression:"formSearch.status"}},[s("el-option",{attrs:{label:"已申请",value:1}}),s("el-option",{attrs:{label:"未申请",value:2}})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("搜索")])],1)],1),s("el-table",{attrs:{data:e.gridData}},[s("el-table-column",{attrs:{property:"nick",label:"用户名","min-width":"90"}}),s("el-table-column",{attrs:{property:"phone",label:"电话",width:"120"}}),s("el-table-column",{attrs:{property:"qq_num",label:"QQ号",width:"120"}}),s("el-table-column",{attrs:{property:"city",label:"城市"}}),s("el-table-column",{attrs:{property:"grade",label:"等级",width:"60"}}),s("el-table-column",{attrs:{property:"distance",label:"距离",width:"120"}}),s("el-table-column",{attrs:{property:"app_fee",label:"验货申请费用","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" $"+e._s(t.row.app_fee)+" ")]}}],null,!1,1897958081)}),s("el-table-column",{attrs:{property:"actual_fee",label:"验货实际费用","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"ac_money",staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请输入内容",disabled:t.row.inputDisabled},model:{value:t.row.actual_fee,callback:function(a){e.$set(t.row,"actual_fee",a)},expression:"scope.row.actual_fee"}},[s("template",{slot:"prepend"},[e._v("$")])],2),s("el-button",{attrs:{type:"text"},on:{click:function(a){return e.rowChange(t.row)}}},[e._v(e._s(t.row.btnName))])]}}],null,!1,1018604409)}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",loading:t.row.isLoding},on:{click:function(a){return e.assign_insp(t.row.user_id)}}},[e._v("指派")])]}}],null,!1,1639396082)})],1)],1)],1):e._e(),e.uploadVisible?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"报告管理",visible:e.uploadVisible},on:{"update:visible":function(t){e.uploadVisible=t}}},[s("el-form",{attrs:{model:e.reportForm}},[s("el-form-item",{attrs:{label:"上传类型"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择活动区域"},model:{value:e.reportForm.type,callback:function(t){e.$set(e.reportForm,"type",t)},expression:"reportForm.type"}},[s("el-option",{attrs:{label:"验货图片",value:"insp_picture"}}),s("el-option",{attrs:{label:"廉政承诺书+手写报告",value:"lianzheng"}}),s("el-option",{attrs:{label:"草稿报告",value:"draft"}}),s("el-option",{attrs:{label:"正式报告",value:"formal"}})],1)],1),s("el-form-item",{attrs:{label:"上传文件"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$host.file+"/api/a_u/upload_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.uploadVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleExport()}}},[e._v("确 定")])],1)],1):e._e(),e.addressAddMask?s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"编辑工厂信息",visible:e.addressAddMask,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"500px",id:"addressAddMask"},on:{"update:visible":function(t){e.addressAddMask=t}}},[s("p",{staticClass:"m-b-10 text-grey"},[e._v("例：埃克斯家居，浙江宁波北环东路499号，李念，sales1@aikesijiaju.com，13766664444")]),s("div",{staticClass:"addressAddMask-textArea"},[s("el-input",{attrs:{clearable:"",type:"textarea",rows:"5",placeholder:"请输入联系人,邮箱,手机号,工厂名称,使用英文字符逗号分隔,若无该项请使用空格表示；如,xx联系人,xxx@qq.com,139xxxxxx",maxlength:"100","show-word-limit":""},model:{value:e.addressAddForm.autoFull,callback:function(t){e.$set(e.addressAddForm,"autoFull",t)},expression:"addressAddForm.autoFull"}}),s("el-button",{staticClass:"zlsb-btn",attrs:{size:"mini"},on:{click:e.addressAddFormAutoFullForm}},[e._v("智能识别")])],1),s("el-form",{ref:"addressAddForm",attrs:{model:e.addressAddForm,"label-width":"90px",id:"addressAddForm",rules:e.rules}},[s("el-form-item",{attrs:{label:"工厂名称"}},[s("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.company_name,callback:function(t){e.$set(e.addressAddForm,"company_name",t)},expression:"addressAddForm.company_name"}})],1),s("el-form-item",{attrs:{label:"联系人"}},[s("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.name,callback:function(t){e.$set(e.addressAddForm,"name",t)},expression:"addressAddForm.name"}})],1),s("el-form-item",{attrs:{label:"电话",prop:"phone"}},[s("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.phone,callback:function(t){e.$set(e.addressAddForm,"phone",t)},expression:"addressAddForm.phone"}})],1),s("el-form-item",{attrs:{label:"备用电话",prop:"spare_phone"}},[s("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.spare_phone,callback:function(t){e.$set(e.addressAddForm,"spare_phone",t)},expression:"addressAddForm.spare_phone"}})],1),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.email,callback:function(t){e.$set(e.addressAddForm,"email",t)},expression:"addressAddForm.email"}})],1),s("el-form-item",{staticClass:"clear addStart",attrs:{label:"所属区域"}},[s("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{clearable:"",filterable:"",placeholder:"请选择国家"},on:{change:function(t){e.addressAddForm.area="",e.addressAddForm.province="",e.addressAddForm.city,e.addressAddForm=Object.assign({},e.addressAddForm)}},model:{value:e.addressAddForm.country,callback:function(t){e.$set(e.addressAddForm,"country",t)},expression:"addressAddForm.country"}},e._l(e.countries,(function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1),"中国"==e.addressAddForm.country?s("el-cascader",{staticStyle:{width:"150px"},attrs:{clearable:"",options:e.provinces,placeholder:"请选择",props:{value:"areaName",label:"areaName",children:"child"},filterable:""},on:{change:function(t){e.addressAddForm.address=""}},model:{value:e.addressAddForm.area,callback:function(t){e.$set(e.addressAddForm,"area",t)},expression:"addressAddForm.area"}}):s("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择省份"},model:{value:e.addressAddForm.province,callback:function(t){e.$set(e.addressAddForm,"province",t)},expression:"addressAddForm.province"}}),"中国"!=e.addressAddForm.country?s("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"请选择城市"},model:{value:e.addressAddForm.city,callback:function(t){e.$set(e.addressAddForm,"city",t)},expression:"addressAddForm.city"}}):e._e()],1),s("el-form-item",{attrs:{label:"详细地址"}},[s("el-input",{attrs:{clearable:""},model:{value:e.addressAddForm.address,callback:function(t){e.$set(e.addressAddForm,"address",t)},expression:"addressAddForm.address"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.addFacatoryAddress}},[e._v("确 定")])],1)],1):e._e()],1)},r=[],i=(a("a4d3"),a("99af"),a("4de4"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("2fa7")),n=(a("96cf"),a("b3f7")),o=a("ac6e"),l=a("2c01");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p="",u={name:"orderIndex",data:function(){return{rules:{phone:[{validator:this.$check.isPhone,trigger:"blur"}],spare_phone:[{validator:this.$check.isPhone,trigger:"blur"}],email:[{validator:this.$check.isEmails,trigger:"blur"}]},currentPathName:"",menus:[{path:"http://www.inspector.ltd/#/index/index",name:"index",label:"首页",translate:"layout_home"},{path:"http://www.inspector.ltd/#/insp/orderManage",name:"wantOrder",label:"我的订单",translate:"layout_wddd"},{path:"http://www.inspector.ltd/#/index/index",name:"ourServer",label:"我们的服务",translate:"layout_wmdfw"},{path:"http://www.inspector.ltd/#/index/aboutUs",name:"aboutUs",label:"关于我们",translate:"layout_aywm"}],countries:[],provinces:[],annexsId:"",productdialogVisible:!1,productData:{},tipdialogVisible:!1,tipData:{sample:"",standard:"",critical:"",major:"",minor:"",remark:""},imageUrl:"",reportForm:{},uploadVisible:!1,addressAddMask:!1,addressAddForm:{autoFull:"",company_name:"",name:"",phone:"",spare_phone:"",email:"",area:"",address:"",setDefaultAddress:!1},addressListOptions:{label:"name",value:"name",children:"child"},addressList:[],mapSelectMask:!0,dialogTableVisible:!1,form:{},formSearch:{select_type:"nick",select_value:""},gridData:[],replyScene:{1:"用户",2:"验货员"},sceneObj:{1:"用户",2:"工厂",3:"管理员"},messageList:[],orderIndex:0,typeObj:{1:"抽检",2:"全检",3:"在线检验",4:"验厂",5:"验柜",6:"验货+检柜"},editorOption:{placeholder:"编辑内容"},unitList:["个","只","双","套","打","卷","辆","头","袋","箱","包","码","米","千克","公吨","公升","加仑","其它"],samplingList:["II级","I级","III级","S-1","S-2","S-3"],AQLList:["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"],MajorList:["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"],MinorList:["0","0.65","1.0","1.5","2.5","4.0","0.010","0.015","0.025","0.04","0.065","0.1","0.15","0.25","0.4","6.5","10","15","25","40","65","100","150","250","400","650","1000"],categoryList:[],props:{label:"name",value:"id",children:"child",emitPath:!1},orderType:[{name:"验货信息"},{name:"历史记录"},{name:"查看评价"}],Map:"",orderData:{users:{},inspectors:[]},orderMarker:[],YHYMarker:[],windows:[],window:"",center:{lng:0,lat:0},orderAliasMask:!1,maxPrice:""}},components:{myOverLay:n["a"]},computed:{rowChange:function(e){!0===e.inputDisabled?(e.btnName="确定",e.inputDisabled=!1):(e.btnName="修改",e.inputDisabled=!0,this.updateAcFee(e.user_id,e.actual_fee))},inspectors:function(){var e=this.orderData?this.orderData.inspectors.map((function(e){return e.users})):{},t=[];return e.length&&e.forEach((function(e){e.nick&&t.push(e.nick)})),t.join(",")}},methods:{rowChange:function(e){!0===e.inputDisabled?(e.btnName="确定",e.inputDisabled=!1):(e.btnName="修改",e.inputDisabled=!0,this.updateAcFee(e.user_id,e.actual_fee))},seeOrder:function(e){var t,a,s,r,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return t={order_id:this.$route.query.id,user_id:this.$route.query.user_id,status:e},n.next=3,regeneratorRuntime.awrap(Object(o["C"])(t));case 3:a=n.sent,s=a.data,r=s.code,i=s.msg,200==r?this.$check.success.call(this,i):this.$check.error.call(this,i);case 6:case"end":return n.stop()}}),null,this)},handleClick:function(e){window.open(e),this.currentPathName=e},fetchCountries:function(){var e,t,a,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(o["A"])());case 2:e=r.sent,t=e.data,a=t.code,s=t.data,200==a&&(this.countries=s);case 5:case"end":return r.stop()}}),null,this)},fetchProvince:function(){var e,t,a,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(o["B"])());case 2:e=r.sent,t=e.data,a=t.code,s=t.data,200==a&&(this.provinces=s);case 5:case"end":return r.stop()}}),null,this)},checkFile:function(e){var t=!1,a=!1,s=["pdf","pptx","doc","docx","xls","xlsx","jpg","png","jpeg","zip","rar"],r=e.name.split(".")[e.name.split(".").length-1];return s.includes(r)||(t=!0),e.size/1024/1024>=100&&(a=!0),t?(this.$check.error.call(this,"所选的文件列表中类型不支持!"),!1):a?(this.$check.error.call(this,"所选的文件列表中大小不能超过30MB!"),!1):void 0},handleRemove:function(e,t){var a=e.response.data.file_path;this.fileList=this.fileList.filter((function(e){return e!=a}))},uploadSuccess:function(e){var t,a,s,r,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(t=e.code,e.data.file_path,a={id:this.annexsId,path:e.data.file_path},200!=t){n.next=8;break}return n.next=5,regeneratorRuntime.awrap(Object(o["F"])(a));case 5:s=n.sent,r=s.data,i=r.code,r.msg,200==i&&(this.$message.success("替换成功"),this.getTableData());case 8:case"end":return n.stop()}}),null,this)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},oneDown:function(e){var t=this;e.length&&e.forEach((function(e){t.enclosureDown(e.path)}))},enclosureDown:function(e){var t=this.imgAPI+e;/.(png|jpg|jpeg|gif)$/g.test(e)?this.downloadPic(t):window.location.href=t},showMsgfromChild:function(e){this.window=e},infoWindowClose:function(e){this.window.visible=!1},infoWindowOpen:function(e){this.window.visible=!0},open:function(e){window.open(this.$host.file+e.path)},handleExport:function(){var e,t,a,s,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=d({order_id:this.$route.query.id},this.reportForm),i.next=3,regeneratorRuntime.awrap(Object(o["w"])(e));case 3:t=i.sent,a=t.data,s=a.code,r=a.msg,200==s?(this.$check.success.call(this,r),this.uploadVisible=!1,this.getTableData()):this.$check.error.call(this,r);case 6:case"end":return i.stop()}}),null,this)},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.reportForm.path=e.data.file_path},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},handleSample:function(){var e,t,a,s,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e=d({order_id:this.$route.query.id},this.tipData),i.next=3,regeneratorRuntime.awrap(Object(o["x"])(e));case 3:t=i.sent,a=t.data,s=a.code,r=a.msg,200==s?(this.$check.success.call(this,r),this.tipdialogVisible=!1,this.getTableData()):this.$check.error.call(this,r);case 6:case"end":return i.stop()}}),null,this)},addFacatoryAddress:function(){var e,t,a,s,r,i,n,l,c,d,p,u,m,h,f,b;return regeneratorRuntime.async((function(v){while(1)switch(v.prev=v.next){case 0:if(e=this.addressAddForm,t=e.name,a=e.phone,s=e.country,r=e.province,i=e.city,n=e.company_name,l=e.spare_phone,c=e.email,d=e.area,p=e.address,e.setDefaultAddress,!this.$check.isEmpty(n)){v.next=4;break}return this.$check.error.call(this,"工厂名称不能为空"),v.abrupt("return");case 4:if(!this.$check.isEmpty(t)){v.next=7;break}return this.$check.error.call(this,"联系人不能为空"),v.abrupt("return");case 7:if(!l||!this.$check.isTel(l)){v.next=10;break}return this.$check.error.call(this,"备用电话格式不正确!"),v.abrupt("return");case 10:if(!this.$check.isEmail(c)){v.next=13;break}return this.$check.error.call(this,"邮箱不能为空"),v.abrupt("return");case 13:if(!this.$check.isEmpty(d)){v.next=16;break}return this.$check.error.call(this,"所属区域不能为空"),v.abrupt("return");case 16:if(!this.$check.isEmpty(p)){v.next=19;break}return this.$check.error.call(this,"详细地址不能为空"),v.abrupt("return");case 19:return u={company_name:n,name:t,phone:a,spare_phone:l,email:c,country:s,province:d?d[0]:r,city:d?d[1]:i,address:p,order_id:this.$route.query.id},v.next=22,regeneratorRuntime.awrap(Object(o["b"])(u));case 22:m=v.sent,h=m.data,f=h.code,b=h.msg,200==f?(this.addressAddMask=!1,this.$check.success.call(this,b),this.factorysAddressIdx=1,this.getTableData(),this.addressAddForm.autoFull=""):this.$check.error.call(this,b);case 25:case"end":return v.stop()}}),null,this)},clearAddressAddForm:function(){this.addressAddForm.name="",this.addressAddForm.phone="",this.addressAddForm.company_name="",this.addressAddForm.spare_phone="",this.addressAddForm.email="",this.addressAddForm.area="",this.addressAddForm.address="",this.addressAddForm.setDefaultAddress=!1},getAddressList:function(){var e,t,a,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(o["l"])());case 2:e=r.sent,t=e.data,a=t.code,s=t.data,200==a&&(this.addressList=s);case 5:case"end":return r.stop()}}),null,this)},addressAddFormAutoFullForm:function(){var e,t,a,s,r,i,n,o;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:e=[],this.addressAddForm.autoFull=this.addressAddForm.autoFull.replace(/，/g,","),e=this.addressAddForm.autoFull.includes(",")?this.addressAddForm.autoFull.split(","):this.addressAddForm.autoFull.split("，"),t=/^\w+@\w+(\.\w+)+$/,a=0;case 5:if(!(a<e.length)){l.next=13;break}if(!t.test(e[a])){l.next=10;break}return this.addressAddForm.email=e[a],e.splice(a,1),l.abrupt("break",13);case 10:a++,l.next=5;break;case 13:s=/^1[3456789]\d{9}$/,r=0;case 15:if(!(r<e.length)){l.next=23;break}if(!s.test(e[r])){l.next=20;break}return this.addressAddForm.phone=e[r],e.splice(r,1),l.abrupt("break",23);case 20:r++,l.next=15;break;case 23:i=/^[((\+\d+)*)(\d+\-)*]*\s*\d+$/,n=0;case 25:if(!(n<e.length)){l.next=33;break}if(!i.test(e[n])){l.next=30;break}return this.addressAddForm.spare_phone=e[n],e.splice(n,1),l.abrupt("break",33);case 30:n++,l.next=25;break;case 33:return o=e[1],l.next=36,regeneratorRuntime.awrap(this.getAddressSearchFromGaode(null,o));case 36:this.addressAddForm.company_name=e[0],this.addressAddForm.name=e[2],this.addressAddForm=d({},this.addressAddForm);case 39:case"end":return l.stop()}}),null,this)},getAddressSearchFromGaode:function(e,t){var a,s,r,i,n,l;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return a={keywords:t||city||"浙江省宁波市",city:""},e.next=3,regeneratorRuntime.awrap(Object(o["d"])(a));case 3:if(s=e.sent,r=s.data.data.data,i=r.pois.slice(0,10).map((function(e){return e.value=e.name,e})),i.length){e.next=9;break}return this.$message.error("请输入正确的地址"),e.abrupt("return");case 9:n=i[0].pname,l=i[0].cityname,this.addressAddForm.area=[n,l],this.addressAddForm.address=i[0].address;case 13:case"end":return e.stop()}}),null,this)},editProduct:function(){var e,t,a,s,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return e={products:this.productData},i.next=3,regeneratorRuntime.awrap(Object(o["k"])(Object.assign(e)));case 3:t=i.sent,a=t.data,s=a.code,a.data,r=a.msg,200==s?(this.$check.success.call(this,r),this.productdialogVisible=!1,this.getTableData()):this.$check.error.call(this,r);case 6:case"end":return i.stop()}}),null,this)},updateAcFee:function(e,t){var a,s,r,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!(Number(t)>Number(this.maxPrice))){n.next=3;break}return this.$message.error("修改费用不能高于订单费用"),n.abrupt("return");case 3:return a={inspector:e,order_id:this.$route.query.id,fee:t,is_dis:0},n.next=6,regeneratorRuntime.awrap(Object(l["h"])(Object.assign(a)));case 6:s=n.sent,r=s.data,i=r.code,r.data,200==i&&this.updateUser();case 9:case"end":return n.stop()}}),null,this)},assign_insp:function(e){var t,a,s,r;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return this.gridData.forEach((function(t){t.user_id==e&&(t["isLoding"]=!0)})),this.$set(this.gridData),t={inspector:e,order_id:this.$route.query.id,pr_inspector:this.orderData.user_id},i.next=5,regeneratorRuntime.awrap(Object(l["a"])(Object.assign(t)));case 5:a=i.sent,s=a.data,r=s.code,s.data,200==r?(this.$check.success.call(this,msg),this.getTableData()):(this.gridData.forEach((function(t){t.user_id==e&&(t["isLoding"]=!1)})),this.$set(this.gridData),this.$check.error.call(this,msg));case 8:case"end":return i.stop()}}),null,this)},updateUser:function(){var e,t,a,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e=d({},this.formSearch,{order_id:this.$route.query.id}),r.next=3,regeneratorRuntime.awrap(Object(l["g"])(Object.assign(e)));case 3:t=r.sent,a=t.data,a.code,s=a.data,this.form=s.order,this.maxPrice=s.order.price,this.gridData=s.insp.map((function(e){return e.btnName="修改",e.inputDisabled=!0,e})),this.gridData.forEach((function(e){e["isLoding"]=!1})),this.users=s.users;case 10:case"end":return r.stop()}}),null,this)},handleBack:function(){var e,t,a,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return e={order_id:this.$route.query.id},r.next=3,regeneratorRuntime.awrap(Object(o["v"])(Object.assign(e)));case 3:t=r.sent,a=t.data,a.data,s=a.code,200==s&&(this.$message.success("退回成功"),this.orderAliasMask=!1,this.$router.go(-1));case 6:case"end":return r.stop()}}),null,this)},getInfo:function(e){var t,a,s,r,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(this.messageList={},t={order_id:this.$route.query.id},a={},1!=e){n.next=10;break}return s={orders_id:this.$route.query.id},n.next=7,regeneratorRuntime.awrap(Object(o["t"])(Object.assign(s)));case 7:a=n.sent,n.next=14;break;case 10:if(2!=e){n.next=14;break}return n.next=13,regeneratorRuntime.awrap(Object(o["s"])(Object.assign(t)));case 13:a=n.sent;case 14:r=a.data,i=r.data,r.code,this.messageList=i;case 16:case"end":return n.stop()}}),null,this)},init:function(){var e=new AMap.Map("container",{center:[116.397428,39.90923],resizeEnable:!0,zoom:10});p=e,this.Map=e,AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView","AMap.MapType","AMap.Geolocation"],(function(){e.addControl(new AMap.ToolBar),e.addControl(new AMap.Scale({position:"lb"})),e.addControl(new AMap.OverView({isOpen:!0})),e.addControl(new AMap.MapType),e.addControl(new AMap.Geolocation)}))},getTableData:function(){var e,t,a,s,r,i=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e={order_id:this.$route.query.id},n.next=3,regeneratorRuntime.awrap(Object(o["u"])(Object.assign(e)));case 3:t=n.sent,a=t.data,s=a.code,r=a.data,200==s&&(this.orderData=r,this.addressAddForm.company_name=r.factorys.company_name,this.addressAddForm.area=[r.factorys.province,r.factorys.city],this.addressAddForm.country=r.factorys.country,this.addressAddForm.province=r.factorys.province,this.addressAddForm.city=r.factorys.city,this.addressAddForm.address=r.factorys.address,this.addressAddForm.name=r.factorys.name,this.addressAddForm.phone=r.factorys.phone,this.addressAddForm.email=r.factorys.email,this.orderData&&(this.addMarker(this.orderData.lon,this.orderData.lat),this.orderData.inspectors.length&&this.orderData.inspectors.forEach((function(e){var t=[e.users.lon,e.users.lat];i.addUserMarker(t,e.users.head,e.users)}))));case 6:case"end":return n.stop()}}),null,this)},addMarker:function(e,t){var a=[e,t];this.center={lng:e,lat:t},this.orderMarker.push({content:'<div style="width:20px;height:20px;border-radius:50%;background-color:red;"></div>',position:a||[]})},addUserMarker:function(e,t,a){this.windows.push({position:e||[],content:'<div class="prompt clearfixed fs-12"><div class="pull-left w-70 text-center"><img src="'.concat(this.$host.file+a.head,'" class="b-round" width="40px" height="40px"></div><div class="pull-left w-150 lh-20"><p>').concat(a.nick,"</p><p>电话：").concat(a.phone,"</p></div></div>"),visible:!1}),this.YHYMarker.push({content:'<div style="border-radius:50%;overflow:hidden;">\n                  <img style="width:40px;height:40px" src="'.concat(this.$host.file+a.head,'"></div>'),position:e||[]})},getInfoWindow:function(e){var t="",a=[];a.push("<img  src="+this.$host.file+e.head+">"),a.push("姓名："+e.nick),a.push("电话："+e.phone),this.infoWindow=new AMap.InfoWindow({isCustom:!0,content:this.createInfoWindow(t,a.join("<br/>")),offset:new AMap.Pixel(60,-10)})},createInfoWindow:function(e,t){var a=document.createElement("div");a.className="custom-info input-card content-window-card";var s=document.createElement("div"),r=document.createElement("div"),i=document.createElement("img");s.className="info-top",r.innerHTML=e,i.src="https://webapi.amap.com/images/close2.gif",i.onclick=m,s.appendChild(r),s.appendChild(i),a.appendChild(s);var n=document.createElement("div");n.className="info-middle",n.style.backgroundColor="white",n.innerHTML=t,a.appendChild(n);var o=document.createElement("div");o.className="info-bottom",o.style.position="relative",o.style.top="0px",o.style.margin="0 auto";var l=document.createElement("img");return l.src="https://webapi.amap.com/images/sharp.png",o.appendChild(l),a.appendChild(o),a},addProductTypeRow:function(e){this.orderData.products[e].models.push({mark:"",amount:"",unit:"件"})},addProductAllRow:function(){this.orderData.products.push({category_id:"",po_num:"",product_name:"",hidden:!1,models:[{mark:"",amount:"",unit:"件"}]})},getCategory:function(){var e,t,a,s;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(Object(o["m"])());case 2:e=r.sent,t=e.data,a=t.code,s=t.data,200==a&&(this.categoryList=s);case 5:case"end":return r.stop()}}),null,this)}},mounted:function(){this.init(),this.getTableData(),this.getCategory(),this.getAddressList(),this.fetchCountries(),this.fetchProvince()}};function m(){p.clearInfoWindow()}var h=u,f=(a("60e4"),a("2877")),b=Object(f["a"])(h,s,r,!1,null,"1dedda45",null);t["default"]=b.exports},"60e4":function(e,t,a){"use strict";var s=a("e101"),r=a.n(s);r.a},e101:function(e,t,a){}}]);